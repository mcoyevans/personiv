{"version":3,"sources":["app/app.module.js","app/app.routes.js","app/controllers/main-view.controller.js","posts/controllers/posts-content-container-controller.js","reservations/controllers/reservations-content-container.controller.js","settings/controllers/birthdays-content-container.controller.js","settings/controllers/equipment-content-container.controller.js","settings/controllers/forms-content-container.controller.js","settings/controllers/groups-content-container.controller.js","settings/controllers/links-content-container.controller.js","settings/controllers/locations-content-container.controller.js","settings/controllers/upload-content-container.controller.js","settings/controllers/users-content-container.controller.js","app/controllers/content/home-content-container.controller.js","app/controllers/content/slideshow-content-container.controller.js","app/controllers/toolbar/home-toolbar.controller.js","app/controllers/toolbar/slideshow-toolbar.controller.js","approvals/controllers/content/approvals-content-container.controller.js","approvals/controllers/dialogs/approval-dialog.controller.js","approvals/controllers/toolbars/approvals-toolbar.controller.js","approvals/controllers/subheaders/approvals-subheader.controller.js","notifications/controllers/toolbars/notifications-toolbar.controller.js","notifications/controllers/content/notifications-content-container.controller.js","posts/controllers/dialogs/post-dialog.controller.js","posts/controllers/dialogs/repost-dialog.controller.js","posts/controllers/dialogs/reposts-dialog.controller.js","posts/controllers/toolbars/posts-toolbar.controller.js","reservations/controllers/dialogs/approved-reservation-dialog.controller.js","reservations/controllers/dialogs/reservation-dialog.controller.js","reservations/controllers/subheaders/reservations-subheader.controller.js","reservations/controllers/toolbars/reservations-toolbar.controller.js","settings/controllers/dialogs/birthday-dialog.controller.js","settings/controllers/dialogs/equipment-dialog.controller.js","settings/controllers/dialogs/equipment-type-dialog.controller.js","settings/controllers/dialogs/form-dialog.controller.js","settings/controllers/dialogs/group-dialog.controller.js","settings/controllers/dialogs/link-dialog.controller.js","settings/controllers/dialogs/location-dialog.controller.js","settings/controllers/dialogs/user-dialog.controller.js","settings/controllers/subheaders/equipment-subheader.controller.js","settings/controllers/toolbars/birthdays-toolbar.controller.js","settings/controllers/toolbars/equipment-toolbar.controller.js","settings/controllers/toolbars/forms-toolbar.controller.js","settings/controllers/toolbars/groups-toolbar.controller.js","settings/controllers/toolbars/links-toolbar.controller.js","settings/controllers/toolbars/locations-toolbar.controller.js","settings/controllers/toolbars/upload-toolbar.controller.js","settings/controllers/toolbars/users-toolbar.controller.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACviBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7NA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var app = angular.module('app', ['shared']);","app\r\n\t.config(['$stateProvider', function($stateProvider){\r\n\t\t$stateProvider\r\n\t\t\t.state('main', {\r\n\t\t\t\turl: '/',\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/main.view.html',\r\n\t\t\t\t\t\tcontroller: 'mainViewController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content-container@main': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'postsContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'postsToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/posts/templates/content/posts.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// .state('main', {\r\n\t\t\t// \turl: '/',\r\n\t\t\t// \tviews: {\r\n\t\t\t// \t\t'': {\r\n\t\t\t// \t\t\ttemplateUrl: '/app/shared/views/main.view.html',\r\n\t\t\t// \t\t\tcontroller: 'mainViewController',\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t'content-container@main': {\r\n\t\t\t// \t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t// \t\t\tcontroller: 'homeContentContainerController',\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t'toolbar@main': {\r\n\t\t\t// \t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t// \t\t\tcontroller: 'homeToolbarController',\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t'left-sidenav@main': {\r\n\t\t\t// \t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t'content@main':{\r\n\t\t\t// \t\t\ttemplateUrl: '/app/components/app/templates/home.template.html',\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\t\t\t.state('main.slideshow', {\r\n\t\t\t\turl: 'slideshow/{slideshowID}',\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tauthorization: ['Helper', '$state', function(Helper, $state){\r\n\t\t\t\t\t\tHelper.get('/slideshow/create')\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tparams: {'slideshowID':null},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'slideshowContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.slideshow': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'slideshowToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.slideshow': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.slideshow':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/app/templates/content/slideshow-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// .state('main.posts', {\r\n\t\t\t// \turl: 'posts/{postID}',\r\n\t\t\t// \tparams: {'postID':null},\r\n\t\t\t// \tviews: {\r\n\t\t\t// \t\t'content-container': {\r\n\t\t\t// \t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t// \t\t\tcontroller: 'postsContentContainerController',\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t'toolbar@main.posts': {\r\n\t\t\t// \t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t// \t\t\tcontroller: 'postsToolbarController',\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t'left-sidenav@main.posts': {\r\n\t\t\t// \t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t// \t\t},\r\n\t\t\t// \t\t'content@main.posts':{\r\n\t\t\t// \t\t\ttemplateUrl: '/app/components/posts/templates/content/posts.template.html',\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\t\t\t.state('main.approvals', {\r\n\t\t\t\turl: 'approvals',\r\n\t\t\t\t// params: {'reservationID':null},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'approvalsContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.approvals': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'approvalsToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'subheader@main.approvals': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/reservations/templates/subheaders/reservations-subheader.template.html',\r\n\t\t\t\t\t\tcontroller: 'approvalsSubheaderController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.approvals': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.approvals':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/approvals/templates/content/approvals-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.reservations', {\r\n\t\t\t\turl: 'reservations',\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'reservationsContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.reservations': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'reservationsToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'subheader@main.reservations': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/reservations/templates/subheaders/reservations-subheader.template.html',\r\n\t\t\t\t\t\tcontroller: 'reservationsSubheaderController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.reservations': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.reservations':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/reservations/templates/content/reservations-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.birthdays', {\r\n\t\t\t\turl: 'settings/birthdays',\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tauthorization: ['Helper', '$state', function(Helper, $state){\r\n\t\t\t\t\t\tHelper.get('/birthday/create')\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'birthdaysContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.birthdays': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'birthdaysToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.birthdays': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.birthdays':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/settings/templates/content/settings-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.upload', {\r\n\t\t\t\turl: 'settings/birthdays/upload',\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tauthorization: ['Helper', '$state', function(Helper, $state){\r\n\t\t\t\t\t\tHelper.get('/birthday/create')\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'uploadContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.upload': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'uploadToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.upload': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.upload':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/settings/templates/content/upload-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.equipment', {\r\n\t\t\t\turl: 'settings/equipment',\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tauthorization: ['Helper', '$state', function(Helper, $state){\r\n\t\t\t\t\t\tHelper.get('/equipment/create')\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'equipmentContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.equipment': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'equipmentToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'subheader@main.equipment': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/settings/templates/subheaders/equipment-subheader.template.html',\r\n\t\t\t\t\t\tcontroller: 'equipmentSubheaderController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.equipment': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.equipment':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/settings/templates/content/settings-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.groups', {\r\n\t\t\t\turl: 'settings/groups',\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tauthorization: ['Helper', '$state', function(Helper, $state){\r\n\t\t\t\t\t\tHelper.get('/group/create')\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'groupsContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.groups': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'groupsToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.groups': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.groups':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/settings/templates/content/settings-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.links', {\r\n\t\t\t\turl: 'settings/links',\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tauthorization: ['Helper', '$state', function(Helper, $state){\r\n\t\t\t\t\t\tHelper.get('/link/create')\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'linksContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.links': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'linksToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.links': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.links':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/settings/templates/content/settings-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.forms', {\r\n\t\t\t\turl: 'settings/forms',\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tauthorization: ['Helper', '$state', function(Helper, $state){\r\n\t\t\t\t\t\tHelper.get('/form/create')\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'formsContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.forms': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'formsToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.forms': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.forms':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/settings/templates/content/settings-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.locations', {\r\n\t\t\t\turl: 'settings/rooms',\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tauthorization: ['Helper', '$state', function(Helper, $state){\r\n\t\t\t\t\t\tHelper.get('/location/create')\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'locationsContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.locations': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'locationsToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.locations': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.locations':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/settings/templates/content/settings-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.users', {\r\n\t\t\t\turl: 'settings/users',\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tauthorization: ['Helper', '$state', function(Helper, $state){\r\n\t\t\t\t\t\tHelper.get('/user/create')\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\treturn $state.go('page-not-found');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'usersContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.users': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'usersToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.users': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.users':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/settings/templates/content/settings-content.template.html',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.state('main.notifications', {\r\n\t\t\t\turl: 'notifications',\r\n\t\t\t\tviews: {\r\n\t\t\t\t\t'content-container':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/views/content-container.view.html',\r\n\t\t\t\t\t\tcontroller: 'notificationsContentContainerController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'toolbar@main.notifications': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/toolbar.template.html',\r\n\t\t\t\t\t\tcontroller: 'notificationsToolbarController',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'left-sidenav@main.notifications': {\r\n\t\t\t\t\t\ttemplateUrl: '/app/shared/templates/sidenavs/main-left-sidenav.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'content@main.notifications':{\r\n\t\t\t\t\t\ttemplateUrl: '/app/components/notifications/templates/content/notifications-content.template.html',\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}]);","app\r\n\t.controller('mainViewController', ['$scope', '$filter', '$state', '$mdDialog', '$mdSidenav', '$mdToast', 'Helper', 'FileUploader', function($scope, $filter, $state, $mdDialog, $mdSidenav, $mdToast, Helper, FileUploader){\r\n\t\t$scope.toggleSidenav = function(menuID){\r\n\t\t\t$mdSidenav(menuID).toggle();\r\n\t\t}\r\n\r\n\t\t$scope.menu = {};\r\n\t\t$scope.menu.pages = [];\r\n\r\n\t\t$scope.menu.static = [\r\n\t\t\t{\r\n\t\t\t\t'state': 'main',\r\n\t\t\t\t'icon': 'mdi-home',\r\n\t\t\t\t'label': 'Home',\r\n\t\t\t},\r\n\t\t\t// {\r\n\t\t\t// \t'state': 'main.posts',\r\n\t\t\t// \t'icon': 'mdi-bulletin-board',\r\n\t\t\t// \t'label': 'Posts',\r\n\t\t\t// },\r\n\t\t\t{\r\n\t\t\t\t'state': 'main.reservations',\r\n\t\t\t\t'icon': 'mdi-format-list-numbers',\r\n\t\t\t\t'label': 'Training Room Reservations',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'state': 'main.notifications',\r\n\t\t\t\t'icon': 'mdi-bell',\r\n\t\t\t\t'label': 'Notifications',\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.menu.section = [\r\n\t\t\t{\r\n\t\t\t\t'name':'Apps',\r\n\t\t\t\t'icon':'mdi-application',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'name':'Forms',\r\n\t\t\t\t'icon':'mdi-file-document',\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t// set section as active\r\n\t\t$scope.setActive = function(index){\r\n\t\t \tangular.element($('[aria-label=\"'+ 'section-' + index + '\"]').closest('li').toggleClass('active'));\r\n\t\t \tangular.element($('[aria-label=\"'+ 'section-' + index + '\"]').closest('li').siblings().removeClass('active'));\r\n\t\t};\r\n\t\t\r\n\t\t$scope.logout = function(){\r\n\t\t\tHelper.post('/user/logout')\r\n\t\t\t\t.success(function(){\r\n\t\t\t\t\twindow.location.href = '/';\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.changePassword = function()\r\n\t\t{\r\n\t\t\t$mdDialog.show({\r\n\t\t      controller: 'changePasswordDialogController',\r\n\t\t      templateUrl: '/app/shared/templates/dialogs/change-password-dialog.template.html',\r\n\t\t      parent: angular.element(document.body),\r\n\t\t      fullscreen: true,\r\n\t\t    })\r\n\t\t    .then(function(){\r\n\t\t    \tHelper.notify('Password changed.')\r\n\t\t    });\r\n\t\t}\r\n\r\n\t\tvar uploader = {};\r\n\r\n\t\tuploader.filter = {\r\n            name: 'photoFilter',\r\n            fn: function(item /*{File|FileLikeObject}*/, options) {\r\n                var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\r\n                return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\r\n            }\r\n        };\r\n\r\n        uploader.sizeFilter = {\r\n\t\t    'name': 'enforceMaxFileSize',\r\n\t\t    'fn': function (item) {\r\n\t\t        return item.size <= 2000000;\r\n\t\t    }\r\n        }\r\n\r\n        uploader.error = function(item /*{File|FileLikeObject}*/, filter, options) {\r\n            $scope.fileError = true;\r\n            $scope.photoUploader.queue = [];\r\n        };\r\n\r\n        uploader.headers = { 'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')};\r\n\r\n\t\t$scope.clickUpload = function(){\r\n\t\t    angular.element('#upload').trigger('click');\r\n\t\t};\r\n\r\n\t\t$scope.markAllAsRead = function(){\r\n\t\t\tHelper.post('/user/mark-all-as-read')\r\n\t\t\t\t.success(function(){\r\n\t\t\t\t\t$scope.user.unread_notifications = [];\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\tvar fetchUnreadNotifications = function(){\r\n\t\t\tHelper.post('/user/check')\r\n\t    \t\t.success(function(data){\r\n\t    \t\t\t$scope.user = data;\r\n\t    \t\t});\r\n\t\t}\r\n\r\n\t\tHelper.post('/user/check')\r\n\t\t\t.success(function(data){\r\n\t\t\t\tvar settings = false;\r\n\t\t\t\tvar settings_menu = [];\r\n\r\n\t\t\t\tangular.forEach(data.roles, function(role){\r\n\t\t\t\t\tif(role.name == 'posts')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata.can_post = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(role.name == 'approvals')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar item = {\r\n\t\t\t\t\t\t\t'state': 'main.approvals',\r\n\t\t\t\t\t\t\t'icon': 'mdi-clipboard-check',\r\n\t\t\t\t\t\t\t'label': 'Approvals',\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$scope.menu.static.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(role.name == 'manage-groups')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsettings = true;\r\n\r\n\t\t\t\t\t\tvar item = {\r\n\t\t\t\t\t\t\t'label': 'Groups',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\t$state.go('main.groups');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsettings_menu.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(role.name == 'manage-users')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsettings = true;\r\n\r\n\t\t\t\t\t\tvar item = {\r\n\t\t\t\t\t\t\t'label': 'Users',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\t$state.go('main.users');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsettings_menu.push(item); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(role.name == 'manage-locations')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsettings = true;\r\n\r\n\t\t\t\t\t\tvar item = {\r\n\t\t\t\t\t\t\t'label': 'Rooms',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\t$state.go('main.locations');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsettings_menu.push(item); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(role.name == 'manage-equipment')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsettings = true;\r\n\r\n\t\t\t\t\t\tvar item = {\r\n\t\t\t\t\t\t\t'label': 'Equipment',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\t$state.go('main.equipment');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsettings_menu.push(item); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(role.name == 'manage-links')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsettings = true;\r\n\r\n\t\t\t\t\t\tvar item = {\r\n\t\t\t\t\t\t\t'label': 'Links',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\t$state.go('main.links');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsettings_menu.push(item); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(role.name == 'manage-birthdays')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsettings = true;\r\n\r\n\t\t\t\t\t\tvar item = {\r\n\t\t\t\t\t\t\t'label': 'Birthdays',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\t$state.go('main.birthdays');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsettings_menu.push(item); \r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(role.name == 'manage-forms')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsettings = true;\r\n\r\n\t\t\t\t\t\tvar item = {\r\n\t\t\t\t\t\t\t'label': 'Forms',\r\n\t\t\t\t\t\t\taction: function(){\r\n\t\t\t\t\t\t\t\t$state.go('main.forms');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsettings_menu.push(item); \r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(settings)\r\n\t\t\t\t{\r\n\t\t\t\t\t$scope.menu.section[2] = {\r\n\t\t\t\t\t\t'name':'Settings',\r\n\t\t\t\t\t\t'icon':'mdi-settings',\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.menu.pages[2] = settings_menu;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.user = data;\r\n\r\n\t\t\t\t$scope.currentTime = Date.now();\r\n\r\n\t\t\t\tHelper.setAuthUser(data);\r\n\r\n\t\t\t\t/* Photo Uploader */\r\n\t\t\t\t$scope.photoUploader = new FileUploader({\r\n\t\t\t\t\turl: '/user/upload-avatar/' + $scope.user.id,\r\n\t\t\t\t\theaders: uploader.headers,\r\n\t\t\t\t\tqueueLimit : 1\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// FILTERS\r\n\t\t        $scope.photoUploader.filters.push(uploader.filter);\r\n\t\t        $scope.photoUploader.filters.push(uploader.sizeFilter);\r\n\t\t        \r\n\t\t\t\t$scope.photoUploader.onWhenAddingFileFailed = uploader.error;\r\n\t\t\t\t$scope.photoUploader.onAfterAddingFile  = function(){\r\n\t\t\t\t\t$scope.fileError = false;\r\n\t\t\t\t\tif($scope.photoUploader.queue.length)\r\n\t\t\t\t\t{\t\r\n\t\t\t\t\t\t$scope.photoUploader.uploadAll()\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.photoUploader.onCompleteItem  = function(data, response){\r\n\t\t\t\t\tif($scope.user.avatar_path)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$scope.currentTime = Date.now();\r\n\t\t\t\t\t\t$scope.photoUploader.queue = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t$state.go($state.current, {}, {reload:true});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tHelper.post('/pusher/config')\r\n\t\t\t\t\t.success(function(config){\r\n\t\t\t\t\t\tvar pusher = new Pusher(config.key, {\r\n\t\t\t\t\t\t\tcluster: config.cluster,\r\n\t\t\t\t\t\t\tencrypted: true,\r\n\t\t\t\t\t\t\tauth: {\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t'X-CSRF-Token': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar channel = {};\r\n\r\n\t\t\t\t\t\tchannel.user = pusher.subscribe('private-App.User.' + $scope.user.id);\r\n\r\n\t\t\t\t\t\tchannel.user.bindings = [\r\n\t\t\t\t\t\t\tchannel.user.bind('Illuminate\\\\Notifications\\\\Events\\\\BroadcastNotificationCreated', function(data) {\r\n\t\t\t\t\t\t\t\t// formating the notification\r\n\t\t\t\t\t\t\t\tdata.created_at = data.attachment.created_at;\r\n\r\n\t\t\t\t\t\t\t\tdata.data = {};\r\n\t\t\t\t\t\t\t\tdata.data.attachment = data.attachment;\r\n\t\t\t\t\t\t\t\tdata.data.url = data.url;\r\n\t\t\t\t\t\t\t\tdata.data.withParams = data.withParams;\r\n\t\t\t\t\t\t\t\tdata.data.sender = data.sender;\r\n\t\t\t\t\t\t\t\tdata.data.message = data.message;\r\n\r\n\t\t\t\t\t\t\t\t// pushes the new notification in the unread_notifications array\r\n\t\t\t\t\t\t\t\t$scope.$apply(function(){\r\n\t\t\t\t\t\t\t\t\t$scope.user.unread_notifications.unshift(data);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// notify the user with a toast message\r\n\t\t\t\t\t\t\t\tHelper.notify(data.sender.name + ' ' + data.message);\r\n\r\n\t\t\t\t\t\t\t\tif($state.current.name == data.data.url)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t$state.go($state.current, {}, {reload:true});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t})\r\n\r\n\t\t\t})\r\n\r\n\t\t$scope.markAsRead = function(notification){\r\n\t\t\tHelper.post('/user/mark-as-read', notification)\r\n\t\t\t\t.success(function(){\r\n\t\t\t\t\tvar index = $scope.user.unread_notifications.indexOf(notification);\r\n\r\n\t\t\t\t\t$scope.user.unread_notifications.splice(index, 1);\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.read = function(notification){\t\t\t\r\n\t\t\t$state.go(notification.data.url);\r\n\r\n\t\t\tif(notification.type == 'App\\\\Notifications\\\\PostCreated' || notification.type == 'App\\\\Notifications\\\\RepostCreated')\r\n\t\t\t{\t\r\n\t\t\t\t// $state.go(notification.data.url, {'postID':notification.data.attachment.id});\r\n\t\t\t\tHelper.set(notification.data.attachment.id);\r\n\t\t\t\t$scope.$broadcast('read-post');\r\n\t\t\t}\r\n\t\t\telse if(notification.type == 'App\\\\Notifications\\\\CommentCreated')\r\n\t\t\t{\r\n\t\t\t\t// $state.go(notification.data.url, {'postID':notification.data.attachment.post_id});\r\n\t\t\t\tHelper.set(notification.data.attachment.post_id);\r\n\t\t\t\t$scope.$broadcast('read-post-and-comments');\r\n\t\t\t}\r\n\r\n\t\t\telse if(notification.type == 'App\\\\Notifications\\\\ReservationCreated')\r\n\t\t\t{\r\n\t\t\t\t// $state.go(notification.data.url, {'reservationID':notification.data.attachment.id});\r\n\t\t\t\tHelper.set(notification.data.attachment.id);\r\n\t\t\t\t$scope.$broadcast('read-approval');\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\t$scope.markAsRead(notification);\r\n\t\t}\r\n\r\n\r\n\t\t$scope.fetchLinks = function(){\t\t\r\n\t\t\tHelper.get('/link')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tvar links = [];\r\n\r\n\t\t\t\t\tangular.forEach(data, function(link){\r\n\t\t\t\t\t\tvar item = {};\r\n\r\n\t\t\t\t\t\titem.label = link.name;\t\r\n\t\t\t\t\t\titem.action = function(){\r\n\t\t\t\t\t\t\twindow.open(link.link);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlinks.push(item);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t$scope.menu.pages[0] = links;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.fetchForms = function(){\t\t\r\n\t\t\tHelper.get('/form')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tvar forms = [];\r\n\r\n\t\t\t\t\tangular.forEach(data, function(form){\r\n\t\t\t\t\t\tvar item = {};\r\n\r\n\t\t\t\t\t\titem.label = form.name;\t\r\n\t\t\t\t\t\titem.action = function(){\r\n\t\t\t\t\t\t\twindow.open('/form/' + form.id);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tforms.push(item);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t$scope.menu.pages[1] = forms;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.fetchLinks();\r\n\t\t$scope.fetchForms();\r\n\r\n\t\t$scope.$on('closeSidenav', function(){\r\n\t\t\t$mdSidenav('left').close();\r\n\t\t});\r\n\r\n\t\t$scope.$on('fetchLinks', function(){\r\n\t\t\t$scope.fetchLinks();\r\n\t\t});\r\n\r\n\t\t$scope.$on('fetchForms', function(){\r\n\t\t\t$scope.fetchForms();\r\n\t\t});\r\n\t}]);","app\r\n\t.controller('postsContentContainerController', ['$scope', '$stateParams', '$state', 'Helper', function($scope, $stateParams, $state, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\t$scope.today = new Date();\r\n\r\n\t\t$scope.viewReposts = function(post){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/posts/templates/dialogs/reposts-dialog.template.html',\r\n\t\t\t\t'controller': 'repostsDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tHelper.set(post);\r\n\r\n\t\t\tHelper.customDialog(dialog);\r\n\t\t}\r\n\r\n\t\t$scope.fetchComments = function(post){\r\n\t\t\tif(!post.comments)\r\n\t\t\t{\r\n\t\t\t\tvar query= {};\r\n\r\n\t\t\t\tquery.where = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label':'post_id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': post.id\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\r\n\t\t\t\tquery.with = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation':'user',\r\n\t\t\t\t\t\t'withTrashed':true,\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t\tquery.paginate = 10;\r\n\r\n\t\t\t\tHelper.post('/comment/enlist', query)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\tpost.comment_details = data;\r\n\r\n\t\t\t\t\t\tpost.comments = [];\r\n\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\titem.created_at = new Date(item.created_at);\r\n\t\t\t\t\t\t\titem.updated_at = new Date(item.updated_at);\r\n\t\t\t\t\t\t\tpost.comments.unshift(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.previousComments = function(post)\r\n\t\t{\r\n\t\t\tvar next_page = post.comment_details.current_page + 1;\r\n\t\t\t\r\n\t\t\tif(next_page <= post.comment_details.last_page)\r\n\t\t\t{\r\n\t\t\t\tvar query= {};\r\n\r\n\t\t\t\tquery.where = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label':'post_id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': post.id\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\r\n\t\t\t\tquery.with = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation':'user',\r\n\t\t\t\t\t\t'withTrashed':true,\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t\tquery.paginate = 10;\r\n\r\n\t\t\t\tHelper.post('/comment/enlist?page=' + next_page, query)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\tpost.comment_details = data;\r\n\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\titem.created_at = new Date(item.created_at);\r\n\t\t\t\t\t\t\titem.updated_at = new Date(item.updated_at);\r\n\t\t\t\t\t\t\tpost.comments.unshift(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t$scope.repost = function(post){\r\n\t\t\tif(!post.repost_id)\r\n\t\t\t{\t\t\t\r\n\t\t\t\tvar dialog = {\r\n\t\t\t\t\t'template':'/app/components/posts/templates/dialogs/repost-dialog.template.html',\r\n\t\t\t\t\t'controller': 'repostDialogController',\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpost.action = 'create';\r\n\r\n\t\t\t\tHelper.set(post);\r\n\r\n\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\tHelper.notify('Repost successful.');\r\n\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar dialog = {\r\n\t\t\t\t\t'template':'/app/components/posts/templates/dialogs/repost-dialog.template.html',\r\n\t\t\t\t\t'controller': 'repostDialogController',\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpost.repost.post.action = 'create';\r\n\r\n\t\t\t\tHelper.set(post.repost.post);\r\n\r\n\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\tHelper.notify('Repost successful.');\r\n\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.commentSection = function(post){\r\n\t\t    angular.element('#comment-' + post.id).trigger('focus');\r\n\t\t    $scope.fetchComments(post);\r\n\t\t};\r\n\r\n\t\t$scope.submit = function(post)\r\n\t\t{\r\n\t\t\t$scope.busy = true;\r\n\t\t\tif(post.new_comment)\r\n\t\t\t{\r\n\t\t\t\t$scope.fetchComments(post);\r\n\r\n\t\t\t\tHelper.post('/comment', post)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\tpost.error = false;\r\n\t\t\t\t\t\tdata.created_at = new Date(data.created_at);\r\n\t\t\t\t\t\tpost.comments_count += 1;\r\n\t\t\t\t\t\tpost.comments.push(data);\r\n\t\t\t\t\t\tpost.new_comment = null;\r\n\r\n\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\tpost.error = true;\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-message-text';\r\n\r\n\t\t$scope.fab.label = 'Post';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/posts/templates/dialogs/post-dialog.template.html',\r\n\t\t\t\t'controller': 'postDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdialog.action = 'create';\r\n\r\n\t\t\tHelper.set(dialog);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('Post created.');\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.$on('read-post', function(){\r\n\t\t\t$scope.request.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label':'id',\r\n\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t'value': Helper.fetch()\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.post.show = false;\r\n  \t\t\t$scope.currentTime = Date.now();\r\n\r\n\t\t\t$scope.init($scope.request);\r\n\t\t});\r\n\r\n\t\t$scope.$on('read-post-and-comments', function(){\r\n\t\t\t$scope.request.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label':'id',\r\n\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t'value': Helper.fetch()\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.post.show = false;\r\n  \t\t\t$scope.currentTime = Date.now();\r\n\r\n\t\t\t$scope.init($scope.request, true);\r\n\t\t});\r\n\r\n\t\t$scope.updatePost = function(data){\r\n\t\t\tif(!data.repost_id)\r\n\t\t\t{\t\t\t\r\n\t\t\t\tvar dialog = {\r\n\t\t\t\t\t'template':'/app/components/posts/templates/dialogs/post-dialog.template.html',\r\n\t\t\t\t\t'controller': 'postDialogController',\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata.action = 'edit';\r\n\r\n\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\tHelper.notify('Post updated.');\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar dialog = {\r\n\t\t\t\t\t'template':'/app/components/posts/templates/dialogs/repost-dialog.template.html',\r\n\t\t\t\t\t'controller': 'repostDialogController',\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata.action = 'edit';\r\n\r\n\t\t\t\tHelper.set(data);\r\n\r\n\t\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\tHelper.notify('Repost updated.');\r\n\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.deletePost = function(data){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete this post?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/post/' + data.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.notify('Post deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.editComment = function(comment, post){\r\n\t\t\tangular.forEach(post.comments, function(item){\r\n\t\t\t\titem.edit = false;\r\n\t\t\t});\r\n\r\n\t\t\tcomment.edit = true;\r\n\r\n\t\t\tcomment.new_message = comment.message;\r\n\t\t}\r\n\r\n\t\t$scope.updateComment = function(comment){\r\n\t\t\t$scope.busy = true;\r\n\r\n\t\t\tHelper.put('/comment/' + comment.id, comment)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tdata.updated_at = new Date(data.updated_at);\r\n\t\t\t\t\tcomment.message = data.message;\r\n\t\t\t\t\tcomment.error = false;\r\n\t\t\t\t\tcomment.edit = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\t$scope.busy = false;\r\n\r\n\t\t\t\t\tHelper.notify('Comment updated.');\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\tcomment.error = true;\r\n\t\t\t\t});\t\t\t\r\n\t\t}\r\n\r\n\t\t$scope.deleteComment = function(comment, post){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete this comment?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/comment/' + comment.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\tvar index = post.comments.indexOf(comment);\r\n\r\n\t\t\t\t\t\t\tpost.comments.splice(index, 1);\r\n\t\t\t\t\t\t\tpost.comments_count--;\r\n\r\n\t\t\t\t\t\t\tHelper.notify('Comment deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.created_at = new Date(data.created_at);\r\n\r\n\t\t\tif(data.repost_id)\r\n\t\t\t{\r\n\t\t\t\tdata.repost.post.created_at = new Date(data.repost.post.created_at);\r\n\r\n\t\t\t\tdata.repost.post.chips = [];\r\n\r\n\t\t\t\tangular.forEach(data.repost.post.hashtags, function(hashtag){\r\n\t\t\t\t\tdata.repost.post.chips.push(hashtag.tag);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdata.chips = [];\r\n\r\n\t\t\tangular.forEach(data.hashtags, function(hashtag){\r\n\t\t\t\tdata.chips.push(hashtag.tag);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.title;\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.searchHashTag = function(chip){\r\n\t\t\t$scope.toolbar.searchText = chip;\r\n\t\t\t$scope.$broadcast('open');\r\n\t\t}\r\n\r\n\t\tvar birthday_query = {\r\n\t\t\t'whereMonth': \r\n\t\t\t{\r\n\t\t\t\t'label': 'birthdate',\r\n\t\t\t\t'value' : new Date().getMonth() + 1,\r\n\t\t\t},\r\n\t\t\t'whereDay': \r\n\t\t\t{\r\n\t\t\t\t'label': 'birthdate',\r\n\t\t\t\t'value' : new Date().getDate(),\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t\tHelper.post('/birthday/enlist', birthday_query)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.birthdays = data;\r\n\t\t\t})\r\n\r\n\t\t$scope.init = function(query, withComments){\r\n\t\t\t$scope.post = {};\r\n\t\t\t$scope.post.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.post.page = 2;\r\n\r\n\t\t\tHelper.post('/user/check')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tangular.forEach(data.roles, function(role){\r\n\t\t\t\t\t\tif(role.name == 'posts')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdata.can_post = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.current_user = data;\r\n\r\n\t\t\t\t\tHelper.post('/post/enlist', query)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t$scope.post.details = data;\r\n\t\t\t\t\t\t\t$scope.post.items = data.data;\r\n\t\t\t\t\t\t\t$scope.post.show = true;\r\n\r\n\t\t\t\t\t\t\t$scope.fab.show = $scope.current_user.can_post ? true : false;\r\n\r\n\t\t\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\r\n\t\t\t\t\t\t\t\t\tif(withComments){\r\n\t\t\t\t\t\t\t\t\t\t$scope.fetchComments(item);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$scope.post.paginateLoad = function(){\r\n\t\t\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\t\t\tif($scope.post.busy || ($scope.post.page > $scope.post.details.last_page)){\r\n\t\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t\t\t *\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t\t\t$scope.post.busy = true;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\t\t\tHelper.post('/post/enlist' + '?page=' + $scope.post.page, query)\r\n\t\t\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t\t\t$scope.post.page++;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.post.items.push(item);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t\t\t$scope.post.busy = false;\r\n\t\t\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\tif(!$stateParams.postID)\r\n\t\t\t{\r\n\t\t\t\t$scope.isLoading = true;\r\n\t  \t\t\t$scope.post.show = false;\r\n\t  \t\t\t$scope.currentTime = Date.now();\r\n\t\t\t\t$scope.request.where = null;\r\n\r\n\t  \t\t\t$scope.init($scope.request);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t  \t\t\t$state.go('main.posts', {'postID':null});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.request = {};\r\n\r\n\t\t$scope.request.withTrashed = false;\r\n\t\t$scope.request.paginate = 10;\r\n\r\n\t\t$scope.request.with = [\r\n\t\t\t{\r\n\t\t\t\t'relation':'user',\r\n\t\t\t\t'withTrashed': true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation':'hashtags',\r\n\t\t\t\t'withTrashed': false,\t\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation':'group',\r\n\t\t\t\t'withTrashed': true,\t\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation':'repost.post',\r\n\t\t\t\t'withTrashed': false,\t\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.request.withCount = [\r\n\t\t\t{\r\n\t\t\t\t'relation':'comments',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation':'reposts',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t}\t\t\t\r\n\t\t]\t\r\n\r\n\t\t$scope.request.orderBy = [\r\n\t\t\t{\r\n\t\t\t\t'column':'updated_at',\r\n\t\t\t\t'order':'desc',\r\n\t\t\t},\r\n\t\t]\r\n\r\n\t\tif($stateParams.postID)\r\n\t\t{\t\t\r\n\t\t\t$scope.request.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $stateParams.postID,\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\t$scope.isLoading = true;\r\n\t\t$scope.$broadcast('close');\r\n\r\n\t\t$scope.init($scope.request);\r\n\t}]);","app\r\n\t.controller('reservationsContentContainerController', ['$scope', '$compile', 'Helper', 'uiCalendarConfig', function($scope, $compile, Helper, uiCalendarConfig){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for subheader\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.subheader = {};\r\n\t\t$scope.subheader.show = true;\r\n\t\t$scope.subheader.current = {};\r\n\t\t\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\t\t$scope.fab.label = 'Reservation';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tHelper.set($scope.subheader.current.fab);\r\n\r\n\t\t\tHelper.customDialog($scope.subheader.current.fab)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('Reservation created.');\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t    $scope.viewReservation = function(data){\r\n\t    \tHelper.set(data);\r\n\r\n\t    \tvar dialog = {\r\n\t    \t\t'template':'/app/components/reservations/templates/dialogs/approved-reservation-dialog.template.html',\r\n\t\t\t\t'controller': 'approvedReservationDialogController',\r\n\t    \t}\r\n\r\n\t    \tHelper.customDialog(dialog);\r\n\t    }\r\n\r\n\t    $scope.editReservation = function(data){\r\n\t    \tdata.action = 'edit';\r\n\r\n\t    \tHelper.set(data);\r\n\r\n\t    \tvar dialog = {\r\n\t    \t\t'template':'/app/components/reservations/templates/dialogs/reservation-dialog.template.html',\r\n\t\t\t\t'controller': 'reservationDialogController',\r\n\t    \t}\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('Reservation updated.');\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t    }\r\n\r\n\t    $scope.deleteReservation = function(data){\r\n\t    \tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete this reservation?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.preload();\r\n\t\t\t\t\tHelper.delete('/reservation/' + data.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t\tHelper.notify('Reservation deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t    }\r\n\r\n\t    $scope.disapproveReservation = function(data){\r\n\t    \tvar dialog = {};\r\n\t\t\tdialog.title = 'Disapprove';\r\n\t\t\tdialog.message = 'Disapprove this reservation?'\r\n\t\t\tdialog.ok = 'Disapprove';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.preload();\r\n\t\t\t\t\tHelper.post('/reservation/disapprove', data)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t\tHelper.notify('Reservation disapproved.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t    }\r\n\r\n\t\t/*\r\n\t\t *\r\n\t\t * Object for calendar\r\n\t\t*/\r\n\t\t$scope.uiConfig = {\r\n\t\t    calendar: {\r\n\t\t    \theight: 500,\r\n\t\t        editable: false,\r\n\t\t        header:{\r\n\t\t          \tleft: 'title',\r\n\t\t          \tcenter: '',\r\n\t\t          \tright: 'today prev,next'\r\n\t\t        },\r\n\t\t        eventClick: $scope.viewReservation,\r\n\t\t        eventDrop: $scope.alertOnDrop,\r\n\t\t        eventResize: $scope.alertOnResize,\r\n\t\t        viewRender: function(date) {\r\n\t\t            $scope.dateRange = {};\r\n\r\n\t\t            $scope.dateRange.start = new Date(date.start._d).toDateString();\r\n\t\t            $scope.dateRange.end = new Date(date.end._d).toDateString();\r\n\r\n\t\t            $scope.isLoading = true;\r\n\r\n\t\t\t\t\tHelper.set($scope.dateRange);\r\n\r\n\t\t            $scope.$broadcast('dateRange');\r\n\r\n\t\t  \t\t\t$scope.init($scope.subheader.current);\r\n\t\t        }\r\n\t\t    }\r\n\t    };\r\n\r\n\r\n\t    $scope.eventSources = [];\r\n\r\n\t    $scope.changeView = function(view){\r\n\t    \tuiCalendarConfig.calendars.reservationCalendar.fullCalendar('changeView', view);\r\n\t    }\r\n\r\n\t    $scope.calendarType = 'month';\r\n\r\n\t\t/* Action originates from subheader */\r\n\t\t$scope.$on('setInit', function(){\r\n\t\t\t$scope.isLoading = true;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t\r\n\t\t\tvar current = Helper.fetch();\r\n\r\n\t\t\t$scope.subheader.current = current;\r\n\t\t\t$scope.init(current);\r\n\t\t});\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.subheader.current.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.subheader.current.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.deleted_at =  data.deleted_at ? new Date(data.deleted_at) : null;\r\n\t\t\tdata.created_at = new Date(data.created_at);\r\n\t\t\tdata.start = new Date(data.start);\r\n\t\t\tdata.end = new Date(data.end);\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.title;\r\n\t\t\t\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.reservation = {};\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\tHelper.post('/user/check')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tangular.forEach(data.roles, function(role){\r\n\t\t\t\t\t\tif(role.name == 'reservations')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdata.can_reserve = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(role.name == 'approvals')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdata.can_approve = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.current_user = data;\r\n\r\n\t\t\t\t\tHelper.post('/reservation/enlist', query.request)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t$scope.eventSources.splice(0,1);\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\r\n\t\t\t\t\t\t\t$scope.reservation.approved = [];\r\n\t\t\t\t\t\t\t$scope.reservation.pending = [];\r\n\r\n\t\t\t\t\t\t\tif(data.length){\r\n\t\t\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\t\t\tangular.forEach(data, function(item){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\r\n\t\t\t\t\t\t\t\t\t// if((item.schedule_approver_id && item.equipment_types_count && item.equipment_approver_id && !item.disapproved_schedule) || (item.schedule_approver_id && !item.equipment_types_count && !item.disapproved_schedule))\r\n\t\t\t\t\t\t\t\t\tif(item.schedule_approver_id && !item.disapproved_schedule)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\titem.title = item.title + ' - ' + item.location.name;\r\n\t\t\t\t\t\t\t\t\t\t$scope.reservation.approved.push(item);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t$scope.reservation.pending.push(item);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t$scope.eventSources.push($scope.reservation.approved);\r\n\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$scope.fab.show = $scope.current_user.can_reserve ? true : false;\r\n\r\n\t\t\t\t\t\t\t$scope.refresh = function(){\r\n\t\t\t\t\t\t\t\t$scope.isLoading = true;\r\n\r\n\t\t\t\t\t  \t\t\t$scope.init($scope.subheader.current);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('birthdaysContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.toolbar.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t$scope.fab.label = 'Birthday';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/birthday-dialog.template.html',\r\n\t\t\t\t'controller': 'birthdayDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdialog.action = 'create';\r\n\r\n\t\t\tHelper.set(dialog);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('Birthday created.');\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.showInactive = true;\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.updateModel = function(data){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/birthday-dialog.template.html',\r\n\t\t\t\t'controller': 'birthdayDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdata.action = 'edit';\r\n\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\tHelper.notify('Birthday updated.');\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteModel = function(data){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete ' + data.last_name + ', ' + data.first_name + ' ' + data.middle_name.charAt(0) + '.'  + '?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/birthday/' + data.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.notify('Birthday deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.deleted_at =  data.deleted_at ? new Date(data.deleted_at) : null;\r\n\t\t\tdata.birthdate =  new Date(data.birthdate);\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.full_name;\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/birthday/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/birthday/enlist' + '?page=' + $scope.model.page, query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.request);\r\n\t\t};\r\n\r\n\t\t$scope.request = {};\r\n\r\n\t\t$scope.request.paginate = 20;\r\n\r\n\t\t$scope.request.withCount = [\r\n\t\t\t{\r\n\t\t\t\t'relation':'users',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t];\t\r\n\r\n\t\t$scope.isLoading = true;\r\n\t\t$scope.$broadcast('close');\r\n\r\n\t\t$scope.init($scope.request);\r\n\t}]);","app\r\n\t.controller('equipmentContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.toolbar.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for subheader\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.subheader = {};\r\n\t\t$scope.subheader.show = true;\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t/* Action originates from subheader */\r\n\t\t$scope.$on('setInit', function(){\r\n\t\t\tvar current = Helper.fetch();\r\n\r\n\t\t\t$scope.subheader.current = current;\r\n\t\t\t$scope.isLoading = true;\r\n\t\t\t$scope.init(current);\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.showInactive = false;\r\n\t\t});\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.subheader.current.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t\t$scope.showInactive = true;\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.subheader.current.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.updateModel = function(data){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/equipment-dialog.template.html',\r\n\t\t\t\t'controller': 'equipmentDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdata.action = 'edit';\r\n\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\tHelper.notify('Equipment updated.');\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteModel = function(data){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete ' + data.asset_tag + '?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/equipment/' + data.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.notify('Equipment deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.deleted_at =  data.deleted_at ? new Date(data.deleted_at) : null;\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.asset_tag;\r\n\t\t\titem.brand = data.brand;\r\n\t\t\titem.model = data.model;\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query, refresh){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/equipment/enlist', query.request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.label = query.label;\r\n\t\t\t\t\t$scope.fab.action = function(){\r\n\t\t\t\t\t\tHelper.set(query.fab);\r\n\r\n\t\t\t\t\t\tHelper.customDialog(query.fab)\r\n\t\t\t\t\t\t\t.then(function(){\r\n\t\t\t\t\t\t\t\tHelper.notify(query.fab.message);\r\n\t\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/equipment/enlist' + '?page=' + $scope.model.page, query.request)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.subheader.current);\r\n\t\t};\r\n\t}]);","app\r\n\t.controller('formsContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.toolbar.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t$scope.fab.label = 'Form';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/form-dialog.template.html',\r\n\t\t\t\t'controller': 'formDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdialog.action = 'create';\r\n\r\n\t\t\tHelper.set(dialog);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('Form created.');\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.showInactive = true;\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.showInactive = false;\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.updateModel = function(data){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/form-dialog.template.html',\r\n\t\t\t\t'controller': 'formDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdata.action = 'edit';\r\n\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\tHelper.notify('Form updated.');\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteModel = function(data){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete ' + data.name + '?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/form/' + data.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.notify('Form deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.deleted_at =  data.deleted_at ? new Date(data.deleted_at) : null;\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.name;\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/form/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/form/enlist' + '?page=' + $scope.model.page, query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.request);\r\n  \t\t\t$scope.$emit('fetchForms');\r\n\t\t};\r\n\r\n\t\t$scope.request = {};\r\n\r\n\t\t$scope.request.paginate = 20;\t\r\n\r\n\t\t$scope.isLoading = true;\r\n\t\t$scope.$broadcast('close');\r\n\r\n\t\t$scope.init($scope.request);\r\n\t}]);","app\r\n\t.controller('groupsContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.toolbar.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t$scope.fab.label = 'Groups';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/group-dialog.template.html',\r\n\t\t\t\t'controller': 'groupDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdialog.action = 'create';\r\n\r\n\t\t\tHelper.set(dialog);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('Group created.');\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.showInactive = true;\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.updateModel = function(data){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/group-dialog.template.html',\r\n\t\t\t\t'controller': 'groupDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdata.action = 'edit';\r\n\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\tHelper.notify('Group updated.');\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteModel = function(data){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete ' + data.name + '?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/group/' + data.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.notify('Group deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.deleted_at =  data.deleted_at ? new Date(data.deleted_at) : null;\r\n\r\n\t\t\tif(data.users_count)\r\n\t\t\t{\r\n\t\t\t\tdata.hideDelete = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.name;\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/group/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/group/enlist' + '?page=' + $scope.model.page, query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.request);\r\n\t\t};\r\n\r\n\t\t$scope.request = {};\r\n\r\n\t\t$scope.request.withTrashed = true;\r\n\t\t$scope.request.paginate = 20;\r\n\r\n\t\t$scope.request.withCount = [\r\n\t\t\t{\r\n\t\t\t\t'relation':'users',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t];\t\r\n\r\n\t\t$scope.isLoading = true;\r\n\t\t$scope.$broadcast('close');\r\n\r\n\t\t$scope.init($scope.request);\r\n\t}]);","app\r\n\t.controller('linksContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.toolbar.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t$scope.fab.label = 'Links';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/link-dialog.template.html',\r\n\t\t\t\t'controller': 'linkDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdialog.action = 'create';\r\n\r\n\t\t\tHelper.set(dialog);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('Link created.');\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.showInactive = true;\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.showInactive = false;\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.updateModel = function(data){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/link-dialog.template.html',\r\n\t\t\t\t'controller': 'linkDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdata.action = 'edit';\r\n\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\tHelper.notify('Link updated.');\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteModel = function(data){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete ' + data.name + '?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/link/' + data.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.notify('Link deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.deleted_at =  data.deleted_at ? new Date(data.deleted_at) : null;\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.name;\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/link/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/link/enlist' + '?page=' + $scope.model.page, query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.request);\r\n  \t\t\t$scope.$emit('fetchLinks');\r\n\t\t};\r\n\r\n\t\t$scope.request = {};\r\n\r\n\t\t$scope.request.withTrashed = true;\r\n\t\t$scope.request.paginate = 20;\r\n\r\n\t\t$scope.request.withCount = [\r\n\t\t\t{\r\n\t\t\t\t'relation':'users',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t},\r\n\t\t];\t\r\n\r\n\t\t$scope.isLoading = true;\r\n\t\t$scope.$broadcast('close');\r\n\r\n\t\t$scope.init($scope.request);\r\n\t}]);","app\r\n\t.controller('locationsContentContainerController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.toolbar.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t$scope.fab.label = 'Locations';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/location-dialog.template.html',\r\n\t\t\t\t'controller': 'locationDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdialog.action = 'create';\r\n\r\n\t\t\tHelper.set(dialog);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('Location created.');\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.showInactive = true;\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.showInactive = false;\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.updateModel = function(data){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/location-dialog.template.html',\r\n\t\t\t\t'controller': 'locationDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdata.action = 'edit';\r\n\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\tHelper.notify('Location updated.');\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteModel = function(data){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete ' + data.name + '?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/location/' + data.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.notify('Location deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.deleted_at =  data.deleted_at ? new Date(data.deleted_at) : null;\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.name;\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/location/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/location/enlist' + '?page=' + $scope.model.page, query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.request);\r\n\t\t};\r\n\r\n\t\t$scope.request = {};\r\n\r\n\t\t$scope.request.withTrashed = true;\r\n\t\t$scope.request.paginate = 20;\t\r\n\r\n\t\t$scope.isLoading = true;\r\n\t\t$scope.$broadcast('close');\r\n\r\n\t\t$scope.init($scope.request);\r\n\t}]);","app\r\n\t.controller('uploadContentContainerController', ['$scope', '$filter', '$state', 'FileUploader', 'Helper', function($scope, $filter, $state, FileUploader, Helper){\r\n\t\t$scope.toolbar = {};\r\n\t\t$scope.form = {};\r\n\r\n\t\t$scope.toolbar.items = [];\r\n\t\t$scope.toolbar.childState = 'Upload';\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\t$scope.showInactive = true;\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t$scope.searchBar = false;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\r\n\t\t$scope.fab.icon = 'mdi-check';\r\n\t\t$scope.fab.label = 'Upload';\r\n\r\n\t\tvar uploader = {};\r\n\r\n\t\tuploader.filter = {\r\n            name: 'excelFilter',\r\n            fn: function(item /*{File|FileLikeObject}*/, options) {\r\n                var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\r\n                return '|vnd.openxmlformats-officedocument.spreadsheetml.sheet|vnd.ms-excel|'.indexOf(type) !== -1;\r\n            }\r\n        };\r\n\r\n        uploader.error = function(item /*{File|FileLikeObject}*/, filter, options) {\r\n            $scope.fileError = true;\r\n            $scope.excelUploader.queue = [];\r\n        };\r\n\r\n        uploader.headers = { 'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')};\r\n\r\n\t\t/* Question Uploader */\r\n\t\t$scope.excelUploader = new FileUploader({\r\n\t\t\turl: '/upload',\r\n\t\t\theaders: uploader.headers,\r\n\t\t\tqueueLimit : 1\r\n\t\t})\r\n\t\t// FILTERS\r\n        $scope.excelUploader.filters.push(uploader.filter);\r\n        \r\n\t\t$scope.excelUploader.onWhenAddingFileFailed = uploader.error;\r\n\t\t$scope.excelUploader.onAfterAddingFile  = function(){\r\n\t\t\t$scope.fileError = false;\r\n\t\t\tif($scope.excelUploader.queue.length)\r\n\t\t\t{\t\r\n\t\t\t\t$scope.excelUploader.uploadAll()\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.checkDuplicate = function(data){\r\n\t\t\tvar nextLoop = true;\r\n\t\t\tvar idx = $scope.employees.indexOf(data);\r\n\t\t\tvar duplicate = false;\r\n\t\t\t// checks for duplicate file name within the form.\r\n\t\t\tangular.forEach($scope.employees, function(employee, key){\r\n\t\t\t\tif(nextLoop && key != idx){\r\n\t\t\t\t\tif(data.employee_number == employee.employee_number){\r\n\t\t\t\t\t\tduplicate = true;\r\n\t\t\t\t\t\tnextLoop = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(duplicate){\r\n\t\t\t\treturn data.duplicate = true;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdata.duplicate = false;\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/birthday/check-duplicate', data)\r\n\t\t\t\t.success(function(bool){\r\n\t\t\t\t\tdata.duplicate = bool;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.remove = function(data){\r\n\t\t\tvar confirm = {\r\n\t\t\t\t'title':'Remove',\r\n\t\t\t\t'message':'Remove ' + data.full_name + ' from the list?',\r\n\t\t\t\t'ok':'Remove',\r\n\t\t\t\t'cancel':'Cancel'\r\n\t\t\t}\r\n\r\n\t\t\tHelper.confirm(confirm).then(function() {\r\n\t\t      \tvar idx = $scope.employees.indexOf(data);\r\n\t\t\t\t$scope.employees.splice(idx, 1);\r\n\t\t    }, function() {\r\n\t\t      \treturn;\r\n\t\t    });\r\n\t\t}\r\n\r\n\t\tvar pushItem = function(data){\r\n\t\t\tangular.forEach(data, function(item, idx){\r\n\t\t\t\titem.birthdate = new Date(item.birthdate);\r\n\t\t\t\tvar nextLoop = true;\r\n\t\t\t\t// compare current item with other items on the array\r\n\t\t\t\tangular.forEach(data, function(other, key){\r\n\t\t\t\t\tif(nextLoop && idx != key)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(item.employee_number == other.employee_number){\r\n\t\t\t\t\t\t\titem.duplicate = true;\r\n\t\t\t\t\t\t\tnextLoop = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\t$scope.employees.push(item);\r\n\r\n\t\t\t\tvar filter = {};\r\n\r\n\t\t\t\tfilter.display = item.full_name;\r\n\r\n\t\t\t\t$scope.toolbar.items.push(filter);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.excelUploader.onSuccessItem  = function(data, response){\t\t\t\r\n\t\t\t$scope.employees = [];\r\n\r\n\t\t\tif(Array.isArray(response[0]))\r\n\t\t\t{\r\n\t\t\t\tangular.forEach(response, function(sheet){\r\n\t\t\t\t\tangular.forEach(sheet, function(item){\r\n\t\t\t\t\t\t$scope.employees.push(item);\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tangular.forEach(response, function(item){\r\n\t\t\t\t\t$scope.employees.push(item);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tHelper.post('/birthday/check-duplicate-multiple', $scope.employees)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tpushItem(data);\r\n\t\t\t\t\t$scope.employees = data;\r\n\t\t\t\t\t$scope.show = true;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t})\r\n\r\n\t\t\t$scope.fab.show = true;\r\n\t\t}\r\n\r\n\t\tvar busy = false;\r\n\t\t\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tvar duplicate = false;\r\n\r\n\t\t\tif($scope.form.employeeForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.form.employeeForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tangular.forEach($scope.employees, function(item){\r\n\t\t\t\tif(item.duplicate){\r\n\t\t\t\t\tHelper.alert('Duplicate Employee', item.employee_number +' already exists.');\r\n\t\t\t\t\tduplicate = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// else{\r\n\t\t\t\t// \titem.delivery_date = item.delivery_date.toDateString();\r\n\t\t\t\t// \titem.live_date = item.live_date.toDateString();\r\n\t\t\t\t// }\r\n\t\t\t});\r\n\r\n\t\t\tif(!busy && !duplicate){\r\n\t\t\t\tbusy = true;\r\n\t\t\t\tHelper.preload();\r\n\r\n\t\t\t\tangular.forEach($scope.employees, function(item){\r\n\t\t\t\t\titem.birthdate = item.birthdate.toLocaleDateString();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tHelper.post('/birthday/store-multiple', $scope.employees)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t$state.go('main.birthdays');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tangular.forEach($scope.employees, function(item){\r\n\t\t\t\t\t\t\titem.birthdate = new Date(item.birthdate);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\tbusy = false;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t}]);","app\r\n\t.controller('usersContentContainerController', ['$scope', '$state', 'Helper', function($scope, $state, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\t$scope.state = $state.current.name;\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.toggleActive = function(){\r\n\t\t\t$scope.showInactive = !$scope.showInactive;\r\n\t\t}\r\n\t\t$scope.toolbar.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-plus';\r\n\r\n\t\t$scope.fab.label = 'Users';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/user-dialog.template.html',\r\n\t\t\t\t'controller': 'userDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdialog.action = 'create';\r\n\r\n\t\t\tHelper.set(dialog);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.notify('User created.');\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.showInactive = true;\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.showInactive = false;\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.updateModel = function(data){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'template':'/app/components/settings/templates/dialogs/user-dialog.template.html',\r\n\t\t\t\t'controller': 'userDialogController',\r\n\t\t\t}\r\n\r\n\t\t\tdata.action = 'edit';\r\n\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\tHelper.notify('User updated.');\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.resetPassword = function(data){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Reset Password';\r\n\t\t\tdialog.message = 'Password will be reset to \"!welcome10\"';\r\n\t\t\tdialog.ok = 'Reset Password';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.post('/user/reset-password', data)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.notify('Reset password succesful.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.deleteModel = function(data){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete ' + data.name + '?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/user/' + data.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.refresh();\r\n\t\t\t\t\t\t\tHelper.notify('User deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.deleted_at =  data.deleted_at ? new Date(data.deleted_at) : null;\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.name;\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.model.page = 2;\r\n\r\n\t\t\tHelper.post('/user/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model.details = data;\r\n\t\t\t\t\t$scope.model.items = data.data;\r\n\t\t\t\t\t$scope.model.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.model.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.model.busy || ($scope.model.page > $scope.model.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.model.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/user/enlist' + '?page=' + $scope.model.page, query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.model.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.model.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.model.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.model.show = false;\r\n\r\n  \t\t\t$scope.init($scope.request);\r\n\t\t};\r\n\r\n\t\t$scope.request = {};\r\n\r\n\t\t$scope.request.withTrashed = true;\r\n\t\t$scope.request.paginate = 20;\t\r\n\t\t$scope.request.with = [\r\n\t\t\t{\r\n\t\t\t\t'relation':'group',\r\n\t\t\t\t'withTrashed':false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'relation':'roles',\r\n\t\t\t\t'withTrashed':false,\r\n\t\t\t},\r\n\t\t]\r\n\t\t$scope.request.where = [\r\n\t\t\t{\r\n\t\t\t\t'label':'super_admin',\r\n\t\t\t\t'condition':'!=',\r\n\t\t\t\t'value':true,\r\n\t\t\t},\r\n\t\t]\r\n\t\t$scope.request.do_not_include_current_user = true;\r\n\r\n\r\n\t\t$scope.isLoading = true;\r\n\t\t$scope.$broadcast('close');\r\n\r\n\t\t$scope.init($scope.request);\r\n\t}]);","app\r\n\t.controller('homeContentContainerController', ['$scope', '$state', 'Helper', function($scope, $state, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t/*\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-presentation';\r\n\t\t$scope.fab.label = 'New';\r\n\r\n\t\t$scope.fab.action = function(){\r\n\t\t\t$state.go('main.slideshow', {'slideshowID': null});\r\n\t\t}\r\n\r\n\t\t$scope.edit = function(id){\r\n\t\t\t$state.go('main.slideshow', {'slideshowID':id});\r\n\t\t}\r\n\r\n\t\t$scope.init = function(){\r\n\t\t\tvar query = {};\r\n\r\n\t\t\tquery.with = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'slides',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\tquery.first = true;\r\n\r\n\t\t\tHelper.post('/user/check')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tangular.forEach(data.roles, function(role){\r\n\t\t\t\t\t\tif(role.name == 'slideshow')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdata.can_slide = true;\r\n\t\t\t\t\t\t\t$scope.fab.show = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.current_user = data;\r\n\t\t\t\t});\r\n\r\n\t\t\tHelper.post('/slideshow/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.slideshow = data;\r\n\t\t\t\t});\r\n\t\t}();\r\n\t}]);","app\r\n\t.controller('slideshowContentContainerController', ['$scope', '$state', '$stateParams', 'FileUploader', 'Helper', function($scope, $state, $stateParams, FileUploader, Helper){\r\n\t\t/*\r\n\t\t *\r\n\t\t * Object for toolbar\r\n\t\t * \r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.action = 'create';\r\n\r\n\t\t$scope.form = {};\r\n\r\n\t\t/*\r\n\t\t *\r\n\t\t * Object for slideshow\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.slideshow = {}\r\n\r\n\t\t$scope.slideshow.slides = [];\r\n\r\n\t\tif($stateParams.slideshowID)\r\n\t\t{\r\n\t\t\t$scope.action = 'edit';\r\n\r\n\t\t\tvar request = {\r\n\t\t\t\t'with': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'slides',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'where': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': $stateParams.slideshowID,\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t'first': true,\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/slideshow/enlist', request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.slideshow = data;\r\n\t\t\t\t\t$scope.show = true;\r\n\r\n\t\t\t\t\t$scope.fab.show = true;\r\n\t\t\t\t\t$scope.fab.icon = 'mdi-check';\r\n\t\t\t\t\t$scope.fab.label = 'Save Changes';\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t *\r\n\t\t * Object for fab\r\n\t\t * \r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\r\n\t\t$scope.fab.icon = 'mdi-upload';\r\n\t\t$scope.fab.label = 'Upload';\r\n\t\t$scope.fab.action = function(){\r\n\t\t\tif($scope.form.slidesForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.form.slidesForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tHelper.preload();\r\n\r\n\t\t\tangular.forEach($scope.slideshow.slides, function(item, key){\r\n\t\t\t\titem.order = key;\r\n\t\t\t});\r\n\r\n\t\t\tif(!$stateParams.slideshowID)\r\n\t\t\t{\r\n\t\t\t\tHelper.post('/slideshow', $scope.slideshow)\r\n\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\tHelper.notify('Upload successfuly.');\r\n\t\t\t\t\t\t$state.go('main');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tHelper.put('/slideshow/' + $stateParams.slideshowID, $scope.slideshow)\r\n\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\tHelper.notify('Changes saved.');\r\n\t\t\t\t\t\t$state.go('main');\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t})\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar uploader = {};\r\n\r\n\t\tuploader.filter = {\r\n            name: 'photoFilter',\r\n            fn: function(item /*{File|FileLikeObject}*/, options) {\r\n                var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\r\n                return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\r\n            }\r\n        };\r\n\r\n        uploader.sizeFilter = {\r\n\t\t    'name': 'enforceMaxFileSize',\r\n\t\t    'fn': function (item) {\r\n\t\t        return item.size <= 10485760;\r\n\t\t    }\r\n        }\r\n\r\n        uploader.error = function(item /*{File|FileLikeObject}*/, filter, options) {\r\n            $scope.fileError = true;\r\n            $scope.photoUploader.queue = [];\r\n        };\r\n\r\n        uploader.headers = { 'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')};\r\n\r\n\t\t$scope.slideUploader = function(){\r\n\t\t\tangular.element('#slides').trigger('click');\r\n\t\t}\r\n\r\n\t\t/* Photo Uploader */\r\n\t\t$scope.photoUploader = new FileUploader({\r\n\t\t\turl: '/temp-upload/upload-photo',\r\n\t\t\theaders: uploader.headers,\r\n\t\t})\r\n\r\n\t\t// FILTERS\r\n        $scope.photoUploader.filters.push(uploader.filter);\r\n        $scope.photoUploader.filters.push(uploader.sizeFilter);\r\n        \r\n\t\t$scope.photoUploader.onWhenAddingFileFailed = uploader.error;\r\n\t\t$scope.photoUploader.onAfterAddingFile  = function(){\r\n\t\t\t$scope.fileError = false;\r\n\t\t\tif($scope.photoUploader.queue.length)\r\n\t\t\t{\t\r\n\t\t\t\tangular.forEach($scope.photoUploader.queue, function(item, key){\r\n\t\t\t\t\t$scope.photoUploader.uploadItem(key)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.photoUploader.onCompleteItem  = function(data, response){\r\n\t\t\tresponse.new = true;\r\n\t\t\t$scope.slideshow.slides.push(response);\r\n\t\t}\r\n\r\n\t\t$scope.photoUploader.onErrorItem = function()\r\n\t\t{\r\n\t\t\tHelper.error();\r\n\t\t}\r\n\r\n\t\t$scope.photoUploader.onCompleteAll = function(){\r\n\t\t\t$scope.show = true;\r\n\t\t\t$scope.fab.show = true;\r\n\t\t\t$scope.photoUploader.queue = [];\r\n\t\t}\r\n\r\n\t\t$scope.moveUp = function(slide){\r\n\t\t\tvar idx = $scope.slideshow.slides.indexOf(slide);\r\n\r\n\t\t\t$scope.slideshow.slides.splice(idx, 1);\r\n\t\t\t$scope.slideshow.slides.splice(idx - 1, 0, slide);\r\n\t\t}\r\n\r\n\t\t$scope.moveDown = function(slide){\r\n\t\t\tvar idx = $scope.slideshow.slides.indexOf(slide);\r\n\r\n\t\t\t$scope.slideshow.slides.splice(idx, 1);\r\n\t\t\t$scope.slideshow.slides.splice(idx + 1, 0, slide);\r\n\t\t}\r\n\r\n\t\t$scope.delete = function(slide){\r\n\t\t\tvar dialog = {\r\n\t\t\t\t'title': 'Delete',\r\n\t\t\t\t'message': 'This image will be deleted permanently.',\r\n\t\t\t\t'ok': 'Delete',\r\n\t\t\t\t'cancel': 'Cancel',\r\n\t\t\t}\r\n\r\n\t\t\tvar idx = $scope.slideshow.slides.indexOf(slide);\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tif(slide.new)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tHelper.post('/temp-upload/delete-slide', slide)\r\n\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\tHelper.notify('Photo deleted.');\r\n\t\t\t\t\t\t\t\t$scope.slideshow.slides.splice(idx, 1);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tHelper.delete('/slide/' + slide.id)\r\n\t\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t\tHelper.notify('Photo deleted.');\r\n\t\t\t\t\t\t\t\t$scope.slideshow.slides.splice(idx, 1);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('homeToolbarController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.toolbar.childState = 'Home';\r\n\r\n\t\t$scope.toolbar.hideSearchIcon = true;\r\n\t}]);","app\r\n\t.controller('slideshowToolbarController', ['$scope', '$stateParams', 'Helper', function($scope, $stateParams, Helper){\r\n\t\t$scope.toolbar.parentState = 'Slideshow';\r\n\r\n\t\tif(!$stateParams.slideshowID)\r\n\t\t{\r\n\t\t\t$scope.toolbar.childState = 'New';\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.toolbar.childState = 'Edit';\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.hideSearchIcon = true;\r\n\t}]);","app\r\n\t.controller('approvalsContentContainerController', ['$scope', '$state', '$stateParams', 'Helper', function($scope, $state, $stateParams, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t$scope.toolbar.sortBy = function(filter){\r\n\t\t\tfilter.sortReverse = !filter.sortReverse;\t\t\t\r\n\t\t\t$scope.sortType = filter.type;\r\n\t\t\t$scope.sortReverse = filter.sortReverse;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Object for subheader\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.subheader = {};\r\n\t\t$scope.subheader.show = true;\r\n\t\t$scope.subheader.current = {};\r\n\r\n\t\t$scope.subheader.mark = {};\r\n\r\n\t\t$scope.subheader.toggleMark = function(){\r\n\t\t\t$scope.subheader.mark.all = !$scope.subheader.mark.all;\r\n\t\t\t$scope.subheader.mark.icon = $scope.subheader.mark.all ? 'mdi-checkbox-marked' : 'mdi-checkbox-blank-outline';\r\n\t\t\t$scope.subheader.mark.label = $scope.subheader.mark.all ? 'Uncheck all' : 'Check all';\r\n\t\t\tangular.forEach($scope.reservation.items, function(item){\r\n\t\t\t\titem.include = $scope.subheader.mark.all;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.subheader.cancelSelectMultiple = function(){\r\n\t\t\t$scope.selectMultiple = false;\r\n\t\t\t$scope.fab.show = false;\r\n\t\t\t$scope.subheader.mark.all = false;\r\n\t\t\t$scope.subheader.mark.icon = 'mdi-checkbox-blank-outline';\r\n\t\t\t$scope.subheader.mark.label = 'Check all';\r\n\r\n\t\t\tangular.forEach($scope.reservation.items, function(item){\r\n\t\t\t\titem.include = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Object for fab\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.fab = {};\r\n\t\t$scope.fab.icon = 'mdi-check';\r\n\r\n\t\t$scope.viewReservation = function(data){\r\n\t    \tHelper.set(data);\r\n\r\n\t    \tvar dialog = {\r\n\t    \t\t'template':'/app/components/approvals/templates/dialogs/approval-dialog.template.html',\r\n\t\t\t\t'controller': 'approvalDialogController',\r\n\t    \t}\r\n\r\n\t    \tHelper.customDialog(dialog)\r\n\t    \t\t.then(function(reschedule){\r\n\t    \t\t\tif(reschedule)\r\n\t    \t\t\t{\r\n\t\t    \t\t\tHelper.notify('Reservation disapproved.');\r\n\t    \t\t\t}\r\n\t    \t\t\telse{\r\n\t\t    \t\t\tHelper.notify('Reservation approved.');\r\n\t    \t\t\t}\r\n\t    \t\t\t$scope.refresh();\r\n\t    \t\t}, function(){\r\n\t    \t\t\treturn;\r\n\t    \t\t});\r\n\t    }\r\n\r\n\t    /* Action originates from subheader */\r\n\t\t$scope.$on('setInit', function(){\r\n\t\t\t$scope.isLoading = true;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t\r\n\t\t\tvar current = Helper.fetch();\r\n\r\n\t\t\t$scope.subheader.current = current;\r\n\r\n\t\t\t$scope.init(current);\r\n\t\t});\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.subheader.current.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.subheader.current.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t$scope.$on('selectMultiple', function(){\r\n\t\t\t$scope.selectMultiple = true;\r\n\t\t});\r\n\r\n\t\t$scope.$on('cancelSelectMultiple', function(){\r\n\t\t\t$scope.subheader.cancelSelectMultiple();\r\n\t\t});\r\n\r\n\t\t$scope.$on('read-approval', function(){\r\n\t\t\t$scope.subheader.current.request.where.push(\r\n\t\t\t\t{\r\n\t\t\t\t\t'label':'id',\r\n\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t'value': Helper.fetch()\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.reservation.show = false;\r\n\r\n\t\t\t$scope.init($scope.subheader.current);\r\n\t\t});\r\n\r\n\t\t/* Formats every data in the paginated call */\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.deleted_at =  data.deleted_at ? new Date(data.deleted_at) : null;\r\n\t\t\tdata.created_at = new Date(data.created_at);\r\n\t\t\tdata.start = new Date(data.start);\r\n\t\t\tdata.end = new Date(data.end);\r\n\r\n\t\t\tvar item = {};\r\n\r\n\t\t\titem.display = data.title;\r\n\t\t\t\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t// if($stateParams.reservationID)\r\n\t\t\t// {\r\n\t\t\t// \tquery.request.where.push(\r\n\t\t\t// \t\t{\r\n\t\t\t// \t\t\t'label':'id',\r\n\t\t\t// \t\t\t'condition':'=',\r\n\t\t\t// \t\t\t'value': $stateParams.reservationID,\t\r\n\t\t\t// \t\t}\r\n\t\t\t// \t);\r\n\t\t\t// }\r\n\r\n\t\t\t$scope.subheader.mark.all = false;\r\n\t\t\t$scope.subheader.mark.icon = 'mdi-checkbox-blank-outline';\r\n\t\t\t$scope.subheader.mark.label = 'Check all';\r\n\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t$scope.reservation = {};\r\n\t\t\t$scope.reservation.items = [];\r\n\t\t\t$scope.reservation.show = true;\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.reservation.page = 2;\r\n\r\n\t\t\tHelper.post('/reservation/enlist', query.request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.reservation.details = data;\r\n\t\t\t\t\t$scope.reservation.items = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t$scope.reservation.items.push(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.isLoading = false;\r\n\r\n\t\t\t\t\t$scope.reservation.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.reservation.busy || ($scope.reservation.page > $scope.reservation.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.reservation.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/reservation/enlist?page=' + $scope.reservation.page, query.request)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.reservation.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.reservation.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.reservation.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.reservation.show = false;\r\n\r\n  \t\t\t$scope.init($scope.subheader.current);\r\n\r\n  \t\t\t$state.go('main.approvals', {'reservationID':null});\r\n\t\t};\r\n\t}]);","app\r\n\t.controller('approvalDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar reservation = Helper.fetch();\r\n\r\n\t\tHelper.post('/user/check')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.approver = data;\r\n\t\t\t});\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.checkDuplicate = function(equipment){\r\n\t\t\tHelper.post('/reservation-equipment/check-duplicate', equipment)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t\tequipment.duplicate = data;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar request = {\r\n\t\t\t'with': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'location',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'user',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'equipment_types',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t'available_units': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'schedule_approver',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'equipment_approver',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'where': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': reservation.id,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'first' : true,\r\n\t\t}\r\n\r\n\t\tHelper.post('/reservation/enlist', request)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.start = new Date(data.start);\r\n\t\t\t\t$scope.end = data.end ? new Date(data.end) : null;\r\n\r\n\t\t\t\t$scope.reservation = data;\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tHelper.error();\r\n\t\t\t})\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.approvalForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.approvalForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t$scope.duplicate = false;\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\t\t\t\t// IT\r\n\t\t\t\tif($scope.approver.group_id == 1){\r\n\t\t\t\t\tHelper.post('/reservation-equipment/approve', $scope.reservation.equipment_types)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\tif(!data){\r\n\t\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t$scope.duplicate = true;\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif($scope.approver.group_id == 2){\r\n\t\t\t\tHelper.post('/reservation/approve', $scope.reservation)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\tif(!data){\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t$scope.duplicate = true;\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.disapprove = function(){\r\n\t\t\tif($scope.approver.group_id == 2){\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tHelper.post('/reservation/reschedule', $scope.reservation)\r\n\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\tHelper.stop(true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('approvalsToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.childState = 'Approvals';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.$on('open', function(){\r\n\t\t\t$scope.showSearchBar();\r\n\t\t\t$scope.searchUserInput();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.reservation.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t\r\n\t\t$scope.toolbar.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Title',\r\n\t\t\t\t'type': 'title',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Remarks',\r\n\t\t\t\t'type': 'remarks',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Date Start',\r\n\t\t\t\t'type': 'start',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Date End',\r\n\t\t\t\t'type': 'end',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t'type': 'created_at',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t];\r\n\t\t\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('approvalsSubheaderController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar setInit = function(data){\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\t$scope.current_tab = data;\r\n\r\n\t\t\t$scope.$emit('setInit');\r\n\t\t}\r\n\r\n\t\tvar today = new Date().toDateString();\r\n\r\n\t\t$scope.subheader.all = {};\r\n\r\n\t\t$scope.subheader.all.label = 'All';\r\n\r\n\t\t$scope.subheader.all.request = {\r\n\t\t\t'with': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'location',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'user',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'schedule_approver',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'equipment_approver',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'where': [],\r\n\t\t\t'approvals': true,\r\n\t\t\t'paginate': 10,\r\n\t\t}\r\n\r\n\t\t$scope.subheader.all.action = function(){\r\n\t\t\tsetInit($scope.subheader.all);\r\n\t\t}\r\n\r\n\t\t$scope.init = function(){\r\n\t\t\tHelper.get('/location')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.locations = data;\r\n\t\t\t\t\t$scope.subheader.navs = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tangular.forEach($scope.locations, function(location){\r\n\t\t\t\t\t\tvar item = {};\r\n\r\n\t\t\t\t\t\titem.id = location.id;\r\n\t\t\t\t\t\titem.label = location.name;\r\n\t\t\t\t\t\titem.request = {\r\n\t\t\t\t\t\t\t'with': [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'location',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'user',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'schedule_approver',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'equipment_approver',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label':'location_id',\r\n\t\t\t\t\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t\t\t\t\t'value': location.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t'approvals': true,\r\n\t\t\t\t\t\t\t'paginate': 10,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\titem.menu = $scope.subheader.all.menu,\r\n\t\t\t\t\t\titem.action = function(current){\r\n\t\t\t\t\t\t\tsetInit(current);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$scope.subheader.navs.push(item);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsetInit($scope.subheader.all);\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.init();\r\n\t}]);","app\r\n\t.controller('notificationsToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.childState = 'Notifications';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.$on('open', function(){\r\n\t\t\t$scope.showSearchBar();\r\n\t\t\t$scope.searchUserInput();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.notification.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('notificationsContentContainerController', ['$scope', '$state', 'Helper', function($scope, $state, Helper){\r\n\t\t$scope.$emit('closeSidenav');\r\n\r\n\t\t/*\r\n\t\t * Object for toolbar\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.toolbar = {};\r\n\r\n\t\t/* Action originates from toolbar */\r\n\t\t$scope.$on('search', function(){\r\n\t\t\t$scope.request.search = $scope.toolbar.searchText;\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\t/* Listens for any request for refresh */\r\n\t\t$scope.$on('refresh', function(){\r\n\t\t\t$scope.request.search = null;\r\n\t\t\t$scope.$broadcast('close');\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\r\n\t\tvar pushItem = function(item){\r\n\t\t\tvar item = {\r\n\t\t\t\t'display': item.data.sender.name,\r\n\t\t\t\t'message': item.data.message,\r\n\t\t\t}\r\n\r\n\t\t\t$scope.toolbar.items.push(item);\r\n\t\t}\r\n\r\n\t\t$scope.readNotification = function(notification){\r\n\t\t\tif(notification.data.withParams)\r\n\t\t\t{\r\n\t\t\t\t$state.go(notification.data.url, {'id':notification.data.attachment.id});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t$state.go(notification.data.url);\r\n\t\t\t\t\r\n\t\t\t\tif(notification.type == 'App\\\\Notifications\\\\PostCreated' || notification.type == 'App\\\\Notifications\\\\RepostCreated')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.set(notification.data.attachment.id);\r\n\t\t\t\t\t$scope.$broadcast('read-post');\r\n\t\t\t\t}\r\n\t\t\t\telse if(notification.type == 'App\\\\Notifications\\\\CommentCreated')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.set(notification.data.attachment.post_id);\r\n\t\t\t\t\t$scope.$broadcast('read-post-and-comments');\r\n\t\t\t\t}\r\n\t\t\t\telse if(notification.type == 'App\\\\Notifications\\\\ReservationCreated')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.set(notification.data.attachment.id);\r\n\t\t\t\t\t$scope.$broadcast('read-approval');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.init = function(query){\r\n\t\t\t$scope.notification = {};\r\n\t\t\t$scope.notification.items = [];\r\n\t\t\t$scope.toolbar.items = [];\r\n\r\n\t\t\t// 2 is default so the next page to be loaded will be page 2 \r\n\t\t\t$scope.notification.page = 2;\r\n\r\n\t\t\tHelper.post('/user/notifications', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.notification.details = data;\r\n\t\t\t\t\t$scope.notification.items = data.data;\r\n\t\t\t\t\t$scope.notification.show = true;\r\n\r\n\t\t\t\t\tif(data.data.length){\r\n\t\t\t\t\t\t// iterate over each record and set the format\r\n\t\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.notification.paginateLoad = function(){\r\n\t\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\t\tif($scope.notification.busy || ($scope.notification.page > $scope.notification.details.last_page)){\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t\t *\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t\t$scope.notification.busy = true;\r\n\t\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\t\tHelper.post('/user/notifications' + '?page=' + $scope.notification.page, query)\r\n\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t\t$scope.notification.page++;\r\n\r\n\t\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t\t$scope.notification.items.push(item);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t\t$scope.notification.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.refresh = function(){\r\n\t\t\t$scope.isLoading = true;\r\n  \t\t\t$scope.notification.show = false;\r\n\t\t\t$scope.request.where = null;\r\n\r\n  \t\t\t$scope.init($scope.request);\r\n\t\t};\r\n\r\n\t\t$scope.request = {\r\n\t\t\t'paginate':20,\r\n\t\t}\r\n\r\n\t\t$scope.init($scope.request);\r\n\t}]);","app\r\n\t.controller('postDialogController', ['$scope', 'Helper', 'FileUploader', function($scope, Helper, FileUploader){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\tvar query = {};\r\n\r\n\t\tquery.self_group = true;\r\n\r\n\t\tHelper.post('/group/enlist', query)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.groups = data;\r\n\t\t\t});\r\n\r\n\t\t$scope.repost = {};\r\n\r\n\t\t$scope.post = {};\r\n\t\t$scope.post.group_id = 'all';\r\n\t\t$scope.post.chips = [];\r\n\r\n\t\tvar uploader = {};\r\n\r\n\t\tuploader.filter = {\r\n            name: 'photoFilter',\r\n            fn: function(item /*{File|FileLikeObject}*/, options) {\r\n                var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\r\n                return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\r\n            }\r\n        };\r\n\r\n        uploader.sizeFilter = {\r\n\t\t    'name': 'enforceMaxFileSize',\r\n\t\t    'fn': function (item) {\r\n\t\t        return item.size <= 10485760;\r\n\t\t    }\r\n        }\r\n\r\n        uploader.error = function(item /*{File|FileLikeObject}*/, filter, options) {\r\n            $scope.fileError = true;\r\n            $scope.postPhotoUploader.queue = [];\r\n        };\r\n\r\n        uploader.headers = { 'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')};\r\n\r\n\t\t$scope.clickUpload = function(){\r\n\t\t    angular.element('#post-upload').trigger('click');\r\n\t\t};\r\n\r\n\t\t/* Photo Uploader */\r\n\t\t$scope.postPhotoUploader = new FileUploader({\r\n\t\t\turl: '/temp-upload/upload-photo',\r\n\t\t\theaders: uploader.headers,\r\n\t\t\tqueueLimit : 1\r\n\t\t})\r\n\r\n\t\tif($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\t$scope.currentTime = Date.now();\r\n\t\t\t\r\n\t\t\tvar query = {};\r\n\r\n\t\t\tquery.with = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'hashtags',\r\n\t\t\t\t\t'withTrashed': false,\t\r\n\t\t\t\t},\r\n\t\t\t];\r\n\r\n\t\t\tquery.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label':'id',\r\n\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t'value': $scope.config.id,\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tquery.first = true;\r\n\r\n\t\t\tHelper.post('/post/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tdata.chips = [];\r\n\r\n\t\t\t\t\tangular.forEach(data.hashtags, function(hashtag){\r\n\t\t\t\t\t\tdata.chips.push(hashtag.tag);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.post = data;\r\n\t\t\t\t\t$scope.post.group_id = data.group_id ? data.group_id : 'all';\r\n\t\t\t\t\t$scope.post.allow_comments = data.allow_comments ? true : false;\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t// FILTERS\r\n        $scope.postPhotoUploader.filters.push(uploader.filter);\r\n        $scope.postPhotoUploader.filters.push(uploader.sizeFilter);\r\n        \r\n\t\t$scope.postPhotoUploader.onWhenAddingFileFailed = uploader.error;\r\n\t\t$scope.postPhotoUploader.onAfterAddingFile  = function(){\r\n\t\t\t$scope.fileError = false;\r\n\t\t\tif($scope.postPhotoUploader.queue.length)\r\n\t\t\t{\t\r\n\t\t\t\t$scope.postPhotoUploader.uploadAll()\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.postPhotoUploader.onCompleteItem  = function(data, response){\r\n\t\t\t$scope.temp_upload = response;\r\n\t\t\t$scope.post.image_path = response.path;\r\n\t\t\tif(response)\r\n\t\t\t{\r\n\t\t\t\t$scope.preview = true;\r\n\t\t\t\t$scope.currentTime = Date.now();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.postPhotoUploader.onErrorItem = function()\r\n\t\t{\r\n\t\t\tHelper.error();\r\n\t\t}\r\n\r\n\t\t$scope.replace = function(){\r\n\t\t\t// $scope.post.image_path = null;\r\n\t\t\t// $scope.temp_upload = {};\r\n\t\t\t// $scope.preview = false;\r\n\t\t\t$scope.postPhotoUploader.queue = [];\r\n\t\t\t$scope.clickUpload();\r\n\t\t}\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.postForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.postForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/post', $scope.post)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/post' + '/' + $scope.config.id, $scope.post)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('repostDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\tvar query = {};\r\n\r\n\t\tquery.self_group = true;\r\n\r\n\t\tHelper.post('/group/enlist', query)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.groups = data;\r\n\t\t\t});\r\n\r\n\t\t$scope.repost = {};\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t\r\n\t\t\tvar query = {};\r\n\r\n\t\t\tquery.with = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'hashtags',\r\n\t\t\t\t\t'withTrashed': false,\t\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'user',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'group',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t];\r\n\r\n\t\t\tquery.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label':'id',\r\n\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t'value': $scope.config.id,\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tquery.first = true;\r\n\r\n\t\t\tHelper.post('/post/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tdata.created_at = new Date(data.created_at);\r\n\t\t\t\t\tdata.chips = [];\r\n\r\n\t\t\t\t\tangular.forEach(data.hashtags, function(hashtag){\r\n\t\t\t\t\t\tdata.chips.push(hashtag.tag);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.repost.post = data;\r\n\t\t\t\t\t$scope.repost.post.allow_comments = data.allow_comments ? true : false;\r\n\r\n\t\t\t\t\t$scope.repost.group_id = data.group_id ? data.group_id : 'all';\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tvar query = {};\r\n\r\n\t\t\tquery.with = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'post',\r\n\t\t\t\t\t'withTrashed': false,\t\r\n\t\t\t\t},\r\n\t\t\t];\r\n\r\n\t\t\tquery.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label':'id',\r\n\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t'value': $scope.config.id,\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tquery.first = true;\r\n\r\n\t\t\tHelper.post('/repost/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tdata.post.created_at = new Date(data.post.created_at);\r\n\t\t\t\t\tdata.post.chips = [];\r\n\r\n\t\t\t\t\tangular.forEach(data.post.hashtags, function(hashtag){\r\n\t\t\t\t\t\tdata.post.chips.push(hashtag.tag);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.repost.post = data.post;\r\n\t\t\t\t\t$scope.repost.post.allow_comments = data.post.allow_comments ? true : false;\r\n\r\n\t\t\t\t\t$scope.repost.group_id = data.post.group_id ? data.post.group_id : 'all';\r\n\r\n\t\t\t\t\tHelper.get('/post/' + $scope.config.id)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t$scope.repost.id = data.repost_id;\r\n\t\t\t\t\t\t\t$scope.repost.title = data.title;\r\n\t\t\t\t\t\t\t$scope.repost.allow_comments = data.allow_comments ? true : false;\r\n\t\t\t\t\t\t\t$scope.repost.group_id = data.group_id ? data.group_id : 'all';\r\n\t\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.repostForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.repostForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t$scope.busy = true;\r\n\r\n\t\t\tif($scope.config.action == 'create')\r\n\t\t\t{\r\n\t\t\t\tHelper.post('/repost', $scope.repost)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t{\r\n\t\t\t\tHelper.put('/repost' + '/' + $scope.config.id, $scope.repost)\r\n\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('repostsDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\tvar post = Helper.fetch();\r\n\r\n\t\tvar query = {};\r\n\r\n\t\tquery.with = [\r\n\t\t\t{\r\n\t\t\t\t'relation': 'post',\r\n\t\t\t\t'withTrashed': false,\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tquery.where = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'post_id',\r\n\t\t\t\t'condition' : '=',\r\n\t\t\t\t'value': post.id\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tquery.orderBy = [\r\n\t\t\t{\r\n\t\t\t\t'column':'created_at',\r\n\t\t\t\t'order':'desc',\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tquery.paginate = 10;\r\n\r\n\t\t$scope.repost = {};\r\n\t\t$scope.repost.items = [];\r\n\t\t$scope.repost.page = 2;\r\n\r\n\t\tvar pushItem = function(data){\r\n\t\t\tdata.created_at = new Date(data.created_at);\r\n\t\t}\r\n\r\n\t\tHelper.post('/repost/enlist', query)\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.repost.details = data;\r\n\t\t\t\t$scope.repost.items = data.data;\r\n\t\t\t\t$scope.repost.show = true;\r\n\r\n\t\t\t\tif(data.data.length){\r\n\t\t\t\t\tangular.forEach(data.data, function(item){\r\n\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.repost.paginateLoad = function(){\r\n\t\t\t\t\t// kills the function if ajax is busy or pagination reaches last page\r\n\t\t\t\t\tif($scope.repost.busy || ($scope.repost.page > $scope.repost.details.last_page)){\r\n\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Executes pagination call\r\n\t\t\t\t\t *\r\n\t\t\t\t\t*/\r\n\t\t\t\t\t// sets to true to disable pagination call if still busy.\r\n\t\t\t\t\t$scope.repost.busy = true;\r\n\t\t\t\t\t$scope.isLoading = true;\r\n\t\t\t\t\t// Calls the next page of pagination.\r\n\t\t\t\t\tHelper.post('/repost/enlist' + '?page=' + $scope.repost.page, query)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t// increment the page to set up next page for next AJAX Call\r\n\t\t\t\t\t\t\t$scope.repost.page++;\r\n\r\n\t\t\t\t\t\t\t// iterate over each data then splice it to the data array\r\n\t\t\t\t\t\t\tangular.forEach(data.data, function(item, key){\r\n\t\t\t\t\t\t\t\tpushItem(item);\r\n\t\t\t\t\t\t\t\t$scope.repost.items.push(item);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t// Enables again the pagination call for next call.\r\n\t\t\t\t\t\t\t$scope.repost.busy = false;\r\n\t\t\t\t\t\t\t$scope.isLoading = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}]);","app\r\n\t.controller('postsToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.childState = 'Home';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.$on('open', function(){\r\n\t\t\t$scope.showSearchBar();\r\n\t\t\t$scope.searchUserInput();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.post.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('approvedReservationDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar reservation = Helper.fetch();\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\tvar request = {\r\n\t\t\t'with': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'location',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'user',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'equipment_types',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation': 'equipment',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'schedule_approver',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'equipment_approver',\r\n\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'where': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': reservation.id,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'first' : true,\r\n\t\t}\r\n\r\n\t\tHelper.post('/reservation/enlist', request)\r\n\t\t\t.success(function(data){\r\n\t\t\t\tdata.start = new Date(data.start);\r\n\t\t\t\tdata.end = data.end ? new Date(data.end) : null;\r\n\r\n\t\t\t\t$scope.reservation = data;\r\n\t\t\t})\r\n\t\t\t.error(function(){\r\n\t\t\t\tHelper.error();\r\n\t\t\t})\r\n\t}]);","app\r\n\t.controller('reservationDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.repetitions = ['Daily', 'Weekly', 'Monthly'];\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.fallback = {};\r\n\r\n\t\t$scope.reservation = {};\r\n\r\n\t\t$scope.reservation.equipment_types = [];\r\n\r\n\t\t$scope.current = new Date();\r\n\r\n\t\tvar formatTime = function(time){\r\n\t\t\tif(time.getMinutes() < 30)\r\n\t\t\t{\r\n\t\t\t\ttime.setMinutes(30);\r\n\t\t\t}\r\n\t\t\telse if(time.getMinutes() > 30)\r\n\t\t\t{\r\n\t\t\t\ttime.setHours(time.getHours() + 1);\r\n\t\t\t\ttime.setMinutes(0);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttime.setSeconds(0);\r\n\t\t}\r\n\r\n\t\tformatTime($scope.current);\r\n\r\n\t\t$scope.reservation.date_start = new Date();\r\n\t\t$scope.reservation.time_start = $scope.current;\r\n\t\t$scope.reservation.date_end = new Date();\r\n\t\t$scope.reservation.time_end = $scope.current;\r\n\r\n\t\tvar formatDateToObject = function(){\r\n\t\t\t$scope.fallback.date_start = new Date($scope.reservation.date_start);\r\n\t\t\t$scope.fallback.date_end = new Date($scope.reservation.date_end);\r\n\t\t\t$scope.fallback.time_start = new Date($scope.reservation.time_start);\r\n\t\t\t$scope.fallback.time_end = new Date($scope.reservation.time_end);\r\n\t\t\t$scope.fallback.until = $scope.reservation.until ? new Date($scope.reservation.until) : null;\r\n\t\t}\r\n\r\n\t\tvar fallbackDateToObject = function(){\r\n\t\t\t$scope.reservation.date_start = new Date($scope.fallback.date_start);\r\n\t\t\t$scope.reservation.date_end = new Date($scope.fallback.date_end);\r\n\t\t\t$scope.reservation.time_start = new Date($scope.fallback.time_start);\r\n\t\t\t$scope.reservation.time_end = new Date($scope.fallback.time_end);\r\n\t\t\t$scope.reservation.until = $scope.fallback.until ? new Date($scope.fallback.until) : null;\r\n\t\t}\r\n\r\n\t\t$scope.floorParticipants = function(){\r\n\t\t\t$scope.reservation.participants = Math.floor($scope.reservation.participants);\r\n\t\t}\r\n\r\n\t\t$scope.setUntil = function(){\r\n\t\t\t$scope.reservation.until = new Date();\r\n\t\t}\r\n\r\n\t\t$scope.setRepeat = function(){\r\n\t\t\tif(!$scope.repeat)\r\n\t\t\t{\r\n\t\t\t\t$scope.reservation.repeat = null;\r\n\t\t\t\t$scope.reservation.until = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tif($scope.reservation.location_id)\r\n\t\t\t{\t\t\t\t\r\n\t\t\t\tvar request = {};\r\n\r\n\t\t\t\trequest.location_id = $scope.reservation.location_id;\r\n\t\t\t\trequest.date_start = new Date($scope.reservation.date_start).toDateString();\r\n\t\t\t\trequest.date_end = new Date($scope.reservation.date_end).toDateString();\r\n\t\t\t\trequest.time_start = new Date($scope.reservation.time_start).toLocaleTimeString();\r\n\t\t\t\trequest.time_end = new Date($scope.reservation.time_end).toLocaleTimeString();\r\n\r\n\t\t\t\tif($scope.reservation.until)\r\n\t\t\t\t{\r\n\t\t\t\t\trequest.repeat = $scope.reservation.repeat;\r\n\t\t\t\t\trequest.until = new Date($scope.reservation.until).toDateString();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif($scope.reservation.id)\r\n\t\t\t\t{\r\n\t\t\t\t\trequest.id = $scope.reservation.id;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tHelper.post('/reservation/check-duplicate', request)\r\n\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$scope.locationChange = function(){\r\n\t\t\t$scope.checkDuplicate();\r\n\t\t}\r\n\r\n\t\t$scope.setDateStart = function(){\r\n\t\t\t$scope.reservation.time_start.setMonth($scope.reservation.date_start.getMonth());\r\n\t\t\t$scope.reservation.time_start.setDate($scope.reservation.date_start.getDate());\r\n\t\t\t$scope.reservation.time_start.setFullYear($scope.reservation.date_start.getFullYear());\r\n\r\n\t\t\t$scope.reservation.time_start = new Date($scope.reservation.time_start);\r\n\r\n\t\t\t$scope.min_end_time = new Date($scope.reservation.time_start);\r\n\r\n\t\t\tif($scope.min_end_time >= $scope.reservation.time_end)\r\n\t\t\t{\r\n\t\t\t\t$scope.reservation.time_end = new Date($scope.min_end_time);\r\n\t\t\t}\r\n\r\n\t\t\tif($scope.reservation.time_start > $scope.reservation.time_end)\r\n\t\t\t{\r\n\t\t\t\t$scope.reservation.time_end = new Date($scope.reservation.time_start);\r\n\t\t\t}\r\n\r\n\t\t\tif($scope.reservation.date_start > $scope.reservation.date_end)\r\n\t\t\t{\r\n\t\t\t\t$scope.reservation.date_end = new Date($scope.reservation.date_start);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\t$scope.checkDuplicate();\r\n\t\t}\r\n\r\n\t\t$scope.setDateEnd = function(){\r\n\t\t\t$scope.reservation.time_end.setMonth($scope.reservation.date_end.getMonth());\r\n\t\t\t$scope.reservation.time_end.setDate($scope.reservation.date_end.getDate());\r\n\t\t\t$scope.reservation.time_end.setFullYear($scope.reservation.date_end.getFullYear());\r\n\r\n\t\t\t$scope.reservation.time_end = new Date($scope.reservation.time_end);\r\n\t\t\t$scope.reservation.until = new Date($scope.reservation.time_end);\r\n\r\n\t\t\tif($scope.reservation.time_start > $scope.reservation.time_end)\r\n\t\t\t{\r\n\t\t\t\t$scope.reservation.time_end = new Date($scope.reservation.time_start);\r\n\t\t\t}\r\n\r\n\t\t\t$scope.checkDuplicate();\r\n\t\t}\r\n\r\n\t\t$scope.timeStartChanged = function(){\r\n\t\t\t$scope.min_end_time = new Date($scope.reservation.time_start);\r\n\r\n\t\t\tif($scope.reservation.time_start > $scope.reservation.time_end)\r\n\t\t\t{\r\n\t\t\t\t$scope.reservation.time_end = new Date($scope.reservation.time_start);\r\n\t\t\t}\r\n\r\n\t\t\t$scope.checkEquipment($scope.reservation.time_start, $scope.reservation.time_end);\r\n\r\n\t\t\t$scope.checkDuplicate();\r\n\t\t} \r\n\r\n\t\t$scope.timeEndChanged = function(){\t\t\t\r\n\t\t\t$scope.checkDuplicate();\r\n\t\t\t$scope.checkEquipment($scope.reservation.time_start, $scope.reservation.time_end);\r\n\t\t}\r\n\r\n\t\t$scope.allDay = function(){\r\n\t\t\tif($scope.reservation.allDay)\r\n\t\t\t{\r\n\t\t\t\t$scope.reservation.time_start.setHours(0,0,0,0);\r\n\r\n\t\t\t\t$scope.reservation.time_start = new Date($scope.reservation.time_start);\r\n\t\t\t\t\r\n\t\t\t\t$scope.reservation.time_end.setHours(23,59,59);\r\n\r\n\t\t\t\t$scope.reservation.time_end = new Date($scope.reservation.time_end);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t$scope.reservation.time_start = new Date();\r\n\t\t\t\t$scope.reservation.time_end = new Date();\r\n\t\t\t\t$scope.min_start_time = new Date();\r\n\t\t\t\t$scope.min_start_date = new Date();\r\n\t\t\t\t$scope.min_end_time = new Date();\r\n\r\n\t\t\t\tformatTime($scope.reservation.time_start);\r\n\t\t\t\tformatTime($scope.reservation.time_end);\r\n\t\t\t\tformatTime($scope.reservation.min_start_time);\r\n\t\t\t\tformatTime($scope.reservation.min_end_time);\r\n\t\t\t}\r\n\r\n\t\t\t$scope.checkDuplicate();\r\n\t\t}\r\n\r\n\t\t$scope.checkEquipment = function(start, end){\r\n\t\t\tvar date = {\r\n\t\t\t\t'start': new Date(start).toDateString() + ' ' + new Date(start).toLocaleTimeString(),\r\n\t\t\t\t'end': new Date(end).toDateString() + ' ' + new Date(end).toLocaleTimeString(),\r\n\t\t\t}\r\n\r\n\t\t\tvar request = {\r\n\t\t\t\t'with': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'relation': 'equipment',\r\n\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t'whereDoesntHave': {\r\n\t\t\t\t\t\t\t'relation': 'reservations',\r\n\t\t\t\t\t\t\t'whereNotNull': ['schedule_approver_id' ,'equipment_approver_id'],\r\n\t\t\t\t\t\t\t'whereBetween': {\r\n\t\t\t\t\t\t\t\t'label': 'start',\r\n\t\t\t\t\t\t\t\t'start': date.start,\r\n\t\t\t\t\t\t\t\t'end': date.end,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/equipment-type/enlist', request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.equipment_types = data\r\n\t\t\t\t\t// $scope.count = data.length;\r\n\r\n\t\t\t\t\tif($scope.config.action == 'edit')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tangular.forEach($scope.equipment_types, function(item, key){\r\n\t\t\t\t\t\t\t$scope.reservation.equipment_types.push(null);\r\n\r\n\t\t\t\t\t\t\tvar query = {};\r\n\t\t\t\t\t\t\tquery.with = [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation': 'equipment_type.equipment',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tquery.where = [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label': 'reservation_id',\r\n\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t'value': $scope.reservation.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label': 'equipment_type_id',\r\n\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t'value': item.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tquery.first = true;\r\n\r\n\t\t\t\t\t\t\tHelper.post('/reservation-equipment/enlist', query)\r\n\t\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t\tif(data)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t$scope.reservation.equipment_types[key] = data.equipment_type;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t$scope.busy = false;\r\n\r\n\t\tHelper.get('/location')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.locations = data;\r\n\t\t\t});\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.min_start_time = new Date();\r\n\t\t\t$scope.min_start_date = new Date();\r\n\r\n\t\t\t$scope.min_end_time = new Date();\r\n\r\n\t\t\t$scope.checkEquipment($scope.reservation.time_start, $scope.reservation.time_end);\r\n\t\t}\r\n\r\n\t\tif($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tvar request = {\r\n\t\t\t\t'where': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t'value': $scope.config.id,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t'first' : true,\r\n\t\t\t}\r\n\r\n\t\t\tHelper.post('/reservation/enlist', request)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tdata.start = new Date(data.start);\r\n\t\t\t\t\tdata.end = data.end ? new Date(data.end) : null;\r\n\r\n\t\t\t\t\t$scope.reservation = data;\r\n\t\t\t\t\t$scope.reservation.equipment_types = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\t$scope.reservation.allDay = data.allDay ? true : false;\r\n\r\n\t\t\t\t\t$scope.reservation.date_start = new Date(data.start);\r\n\t\t\t\t\t$scope.reservation.date_end = new Date(data.end);\r\n\r\n\t\t\t\t\t$scope.reservation.time_start = new Date(data.start);\r\n\t\t\t\t\t$scope.reservation.time_end = new Date(data.end);\r\n\r\n\t\t\t\t\t$scope.min_start_time = new Date();\r\n\t\t\t\t\t$scope.min_start_date = new Date();\r\n\r\n\t\t\t\t\t$scope.min_end_time = new Date();\r\n\r\n\t\t\t\t\t$scope.checkEquipment($scope.reservation.time_start, $scope.reservation.time_end);\r\n\t\t\t\t})\r\n\t\t\t\t.error(function(){\r\n\t\t\t\t\tHelper.error();\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.reservationForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.reservationForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\t\t\t\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tformatDateToObject();\r\n\r\n\t\t\t\t$scope.reservation.time_start = new Date($scope.reservation.time_start).setSeconds(0);\r\n\t\t\t\t$scope.reservation.time_end = new Date($scope.reservation.time_end).setSeconds(0);\r\n\r\n\t\t\t\t$scope.reservation.date_start = new Date($scope.reservation.date_start).toDateString();\r\n\t\t\t\t$scope.reservation.date_end = new Date($scope.reservation.date_end).toDateString();\r\n\t\t\t\t$scope.reservation.time_start = new Date($scope.reservation.time_start).toLocaleTimeString();\r\n\t\t\t\t$scope.reservation.time_end = new Date($scope.reservation.time_end).toLocaleTimeString();\r\n\t\t\t\t$scope.reservation.until = $scope.reservation.until ? new Date($scope.reservation.until).toDateString() : null;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/reservation', $scope.reservation)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(!duplicate)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.duplicate = duplicate;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tfallbackDateToObject();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\r\n\t\t\t\t\t\t\tfallbackDateToObject();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/reservation' + '/' + $scope.config.id, $scope.reservation)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(!duplicate)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\t$scope.duplicate = duplicate;\r\n\r\n\t\t\t\t\t\t\t\tfallbackDateToObject();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\r\n\t\t\t\t\t\t\tfallbackDateToObject();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('reservationsSubheaderController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar setInit = function(data){\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\t$scope.current_tab = data;\r\n\r\n\t\t\t$scope.$emit('setInit');\r\n\t\t}\r\n\r\n\t\t$scope.subheader.all = {};\r\n\r\n\t\t$scope.subheader.all.label = 'All';\r\n\t\t\r\n\t\t$scope.subheader.all.fab = {\r\n\t\t\t'template':'/app/components/reservations/templates/dialogs/reservation-dialog.template.html',\r\n\t\t\t'controller': 'reservationDialogController',\r\n\t\t\t'action':'create',\r\n\t\t}\r\n\r\n\t\t$scope.subheader.all.request = {\r\n\t\t\t'with': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'location',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'user',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'schedule_approver',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'equipment_approver',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\t'withCount': [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'equipment_types',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t}\r\n\r\n\t\t$scope.subheader.all.action = function(){\r\n\t\t\tsetInit($scope.subheader.all);\r\n\t\t}\r\n\r\n\t\t$scope.$on('dateRange', function(){\r\n\t\t\tvar dateRange = Helper.fetch();\r\n\r\n\t\t\tvar whereBetween = {\r\n\t\t\t\t'label': 'start',\r\n\t\t\t\t'start': dateRange.start,\r\n\t\t\t\t'end': dateRange.end,\r\n\t\t\t}\r\n\r\n\t\t\t$scope.subheader.all.request.whereBetween = whereBetween;\r\n\r\n\t\t\tangular.forEach($scope.subheader.navs, function(item){\r\n\t\t\t\titem.request.whereBetween = whereBetween;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$scope.init = function(){\r\n\t\t\tHelper.get('/location')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.locations = data;\r\n\t\t\t\t\t$scope.subheader.navs = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tangular.forEach($scope.locations, function(location){\r\n\t\t\t\t\t\tvar item = {};\r\n\r\n\t\t\t\t\t\titem.id = location.id;\r\n\t\t\t\t\t\titem.label = location.name;\r\n\t\t\t\t\t\titem.request = {\r\n\t\t\t\t\t\t\t'with': [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'location',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'user',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'schedule_approver',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'equipment_approver',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t'withCount': [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'relation':'equipment_types',\r\n\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label':'location_id',\r\n\t\t\t\t\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t\t\t\t\t'value': location.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t'whereBetween': {\r\n\t\t\t\t\t\t\t\t'label': 'start',\r\n\t\t\t\t\t\t\t\t'start': $scope.dateRange.start,\r\n\t\t\t\t\t\t\t\t'end': $scope.dateRange.end,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\titem.fab = {\r\n\t\t\t\t\t\t\t'template':'/app/components/reservations/templates/dialogs/reservation-dialog.template.html',\r\n\t\t\t\t\t\t\t'controller': 'reservationDialogController',\r\n\t\t\t\t\t\t\t'action':'create',\r\n\t\t\t\t\t\t\t'message': 'Reservation created',\r\n\t\t\t\t\t\t\t'location_id': location.id,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\titem.action = function(current){\r\n\t\t\t\t\t\t\tsetInit(current);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$scope.subheader.navs.push(item);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsetInit($scope.subheader.all);\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.init();\r\n\t}]);","app\r\n\t.controller('reservationsToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.childState = 'Room Reservations';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.reservation.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('birthdayDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\t$scope.today = new Date();\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.model = {};\r\n\t\t}\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tHelper.get('/birthday' + '/' + $scope.config.id)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\tdata.birthdate = new Date(data.birthdate);\r\n\t\t\t\t\t$scope.model = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/birthday' + '/check-duplicate', $scope.model)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.modelForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.modelForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\t$scope.model.birthdate = $scope.model.birthdate.toLocaleDateString();\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/birthday', $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t\t$scope.model.birthdate = new Date($scope.model.birthdate);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/birthday' + '/' + $scope.config.id, $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t\t$scope.model.birthdate = new Date($scope.model.birthdate);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('equipmentDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.equipment = {};\r\n\t\t\t$scope.equipment.equipment_type_id = $scope.config.equipment_type_id;\r\n\t\t}\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tHelper.get('/equipment' + '/' + $scope.config.id)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.equipment = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/equipment' + '/check-duplicate', $scope.equipment)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.equipmentForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.equipmentForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/equipment', $scope.equipment)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/equipment' + '/' + $scope.config.id, $scope.equipment)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('equipmentTypeDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.equipment_type = {};\r\n\t\t}\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tHelper.get('/equipment-type' + '/' + $scope.config.id)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.equipment_type = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/equipment-type' + '/check-duplicate', $scope.equipment_type)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.equipmentTypeForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.equipmentTypeForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/equipment-type', $scope.equipment_type)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/equipment-type' + '/' + $scope.config.id, $scope.equipment_type)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('formDialogController', ['$scope', 'Helper', 'FileUploader', function($scope, Helper, FileUploader){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\t$scope.document = {};\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\tif($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tvar query = {};\r\n\r\n\t\t\tquery.where = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'label': 'id',\r\n\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t'value': $scope.config.id,\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tquery.first = true;\r\n\r\n\t\t\tHelper.post('/form/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.document = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\tvar busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\r\n\r\n\t\t$scope.clickUpload = function(){\r\n\t\t    angular.element('#file-upload').trigger('click');\r\n\t\t};\r\n\r\n\t\tvar uploader = {};\r\n\r\n\t\tuploader.filter = {\r\n            name: 'fileTypeFilter',\r\n            fn: function(item /*{File|FileLikeObject}*/, options) {\r\n                var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\r\n                return '|pdf|'.indexOf(type) !== -1;\r\n            }\r\n        };\r\n\r\n        uploader.error = function(item /*{File|FileLikeObject}*/, filter, options) {\r\n            $scope.fileError = true;\r\n            $scope.pdfUploader.queue = [];\r\n        };\r\n\r\n        uploader.headers = { 'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')};\r\n\r\n\t\t/* Question Uploader */\r\n\t\t$scope.pdfUploader = new FileUploader({\r\n\t\t\turl: '/temp-upload/upload-file',\r\n\t\t\theaders: uploader.headers,\r\n\t\t\tqueueLimit : 1\r\n\t\t})\r\n\t\t// FILTERS\r\n        $scope.pdfUploader.filters.push(uploader.filter);\r\n        \r\n\t\t$scope.pdfUploader.onWhenAddingFileFailed = uploader.error;\r\n\t\t$scope.pdfUploader.onAfterAddingFile  = function(){\r\n\t\t\t$scope.fileError = false;\r\n\t\t\tif($scope.pdfUploader.queue.length)\r\n\t\t\t{\t\r\n\t\t\t\t$scope.pdfUploader.uploadAll();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.pdfUploader.onCompleteItem  = function(data, response){\r\n\t\t\t$scope.document.path = response;\r\n\t\t}\r\n\r\n\t\t$scope.pdfUploader.onErrorItem = function()\r\n\t\t{\r\n\t\t\t$scope.error = true;\r\n\t\t}\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/form/check-duplicate', 'FormController@checkDuplicate')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.documentForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.documentForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/form', $scope.document)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/form' + '/' + $scope.config.id, $scope.document)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('groupDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.model = {};\r\n\t\t}\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tHelper.get('/group' + '/' + $scope.config.id)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/group' + '/check-duplicate', $scope.model)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.modelForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.modelForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/group', $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/group' + '/' + $scope.config.id, $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('linkDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.model = {};\r\n\t\t}\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tHelper.get('/link' + '/' + $scope.config.id)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/link' + '/check-duplicate', $scope.model)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.modelForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.modelForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/link', $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/link' + '/' + $scope.config.id, $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('locationDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.model = {};\r\n\t\t}\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tHelper.get('/location' + '/' + $scope.config.id)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.model = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/location' + '/check-duplicate', $scope.model)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.modelForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.modelForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/location', $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/location' + '/' + $scope.config.id, $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('userDialogController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\t$scope.config = Helper.fetch();\r\n\r\n\t\tHelper.get('/group')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.groups = data;\r\n\t\t\t});\r\n\r\n\t\tHelper.post('/role/enlist')\r\n\t\t\t.success(function(data){\r\n\t\t\t\t$scope.roles = data;\r\n\t\t\t})\r\n\r\n\t\tif($scope.config.action == 'create')\r\n\t\t{\r\n\t\t\t$scope.model = {};\r\n\t\t\t$scope.model.roles = [];\r\n\t\t\t$scope.model.group_id = $scope.config.group_id;\r\n\t\t}\r\n\t\telse if($scope.config.action == 'edit')\r\n\t\t{\r\n\t\t\tHelper.post('/role/enlist')\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.roles = data;\r\n\t\t\t\t\t$scope.count = $scope.roles.length;\r\n\t\t\r\n\t\t\t\t\tHelper.get('/user' + '/' + $scope.config.id)\r\n\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t$scope.model = data;\r\n\t\t\t\t\t\t\t$scope.model.roles = [];\r\n\r\n\t\t\t\t\t\t\tangular.forEach($scope.roles, function(item, key){\r\n\t\t\t\t\t\t\t\t$scope.model.roles.push(null);\r\n\r\n\t\t\t\t\t\t\t\tvar query = {};\r\n\t\t\t\t\t\t\t\tquery.with = [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'relation':'role',\r\n\t\t\t\t\t\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t\tquery.where = [\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'label': 'user_id',\r\n\t\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t\t'value': $scope.model.id,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t'label': 'role_id',\r\n\t\t\t\t\t\t\t\t\t\t'condition': '=',\r\n\t\t\t\t\t\t\t\t\t\t'value': item.id,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t\tquery.first = true;\r\n\r\n\t\t\t\t\t\t\t\tHelper.post('/user-role/enlist', query)\r\n\t\t\t\t\t\t\t\t\t.success(function(data){\r\n\t\t\t\t\t\t\t\t\t\t$scope.count--;\r\n\t\t\t\t\t\t\t\t\t\tif(data)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t$scope.model.roles.splice(key, 1, data.role);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.duplicate = false;\r\n\r\n\t\t$scope.busy = false;\r\n\r\n\t\t$scope.cancel = function(){\r\n\t\t\tHelper.cancel();\r\n\t\t}\t\t\r\n\r\n\t\t$scope.checkDuplicate = function(){\r\n\t\t\tHelper.post('/user' + '/check-email', $scope.model)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.duplicate = data;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.submit = function(){\r\n\t\t\tif($scope.modelForm.$invalid){\r\n\t\t\t\tangular.forEach($scope.modelForm.$error, function(field){\r\n\t\t\t\t\tangular.forEach(field, function(errorField){\r\n\t\t\t\t\t\terrorField.$setTouched();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!$scope.duplicate)\r\n\t\t\t{\r\n\t\t\t\t$scope.busy = true;\r\n\r\n\t\t\t\tif($scope.config.action == 'create')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.post('/user', $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse if($scope.config.action == 'edit')\r\n\t\t\t\t{\r\n\t\t\t\t\tHelper.put('/user' + '/' + $scope.config.id, $scope.model)\r\n\t\t\t\t\t\t.success(function(duplicate){\r\n\t\t\t\t\t\t\tif(duplicate){\r\n\t\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tHelper.stop();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\t$scope.busy = false;\r\n\t\t\t\t\t\t\t$scope.error = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('equipmentSubheaderController', ['$scope', 'Helper', function($scope, Helper){\r\n\t\tvar setInit = function(data){\r\n\t\t\tHelper.set(data);\r\n\r\n\t\t\t$scope.current_tab = data;\r\n\r\n\t\t\t$scope.$emit('setInit');\r\n\t\t}\r\n\r\n\t\t$scope.subheader.create = function(){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.template = '/app/components/settings/templates/dialogs/equipment-type-dialog.template.html';\r\n\t\t\tdialog.controller = 'equipmentTypeDialogController';\r\n\t\t\tdialog.action = 'create';\r\n\r\n\t\t\tHelper.set(dialog);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$scope.init();\r\n\t\t\t\t\tHelper.notify('Equipment type created.');\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.subheader.update = function(){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.template = '/app/components/settings/templates/dialogs/equipment-type-dialog.template.html';\r\n\t\t\tdialog.controller = 'equipmentTypeDialogController';\r\n\t\t\tdialog.action = 'edit';\r\n\t\t\tdialog.id = $scope.current_tab.id;\r\n\r\n\t\t\tHelper.set(dialog);\r\n\r\n\t\t\tHelper.customDialog(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\t$scope.init();\r\n\t\t\t\t\tHelper.notify('Equipment type updated.');\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.subheader.delete = function(){\r\n\t\t\tvar dialog = {};\r\n\t\t\tdialog.title = 'Delete';\r\n\t\t\tdialog.message = 'Delete ' + $scope.current_tab.label + '?'\r\n\t\t\tdialog.ok = 'Delete';\r\n\t\t\tdialog.cancel = 'Cancel';\r\n\r\n\t\t\tHelper.confirm(dialog)\r\n\t\t\t\t.then(function(){\r\n\t\t\t\t\tHelper.delete('/equipment-type/' + $scope.current_tab.id)\r\n\t\t\t\t\t\t.success(function(){\r\n\t\t\t\t\t\t\t$scope.init();\r\n\t\t\t\t\t\t\tHelper.notify('Equipment type deleted.');\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.error(function(){\r\n\t\t\t\t\t\t\tHelper.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, function(){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.init = function(){\r\n\t\t\tvar query = {};\r\n\t\t\tquery.withCount = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'relation':'equipment',\r\n\t\t\t\t\t'withTrashed': false,\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tHelper.post('/equipment-type/enlist', query)\r\n\t\t\t\t.success(function(data){\r\n\t\t\t\t\t$scope.equipment_types = data;\r\n\t\t\t\t\t$scope.subheader.navs = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tangular.forEach($scope.equipment_types, function(equipment_type){\r\n\t\t\t\t\t\tvar item = {};\r\n\r\n\t\t\t\t\t\titem.id = equipment_type.id;\r\n\t\t\t\t\t\titem.equipment_count = equipment_type.equipment_count;\r\n\t\t\t\t\t\titem.label = equipment_type.name;\r\n\t\t\t\t\t\titem.request = {\r\n\t\t\t\t\t\t\t'withTrashed': true,\r\n\t\t\t\t\t\t\t'where': [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'label':'equipment_type_id',\r\n\t\t\t\t\t\t\t\t\t'condition':'=',\r\n\t\t\t\t\t\t\t\t\t'value': equipment_type.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t'paginate':20,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\titem.fab = {\r\n\t\t\t\t\t\t\t'template':'/app/components/settings/templates/dialogs/equipment-dialog.template.html',\r\n\t\t\t\t\t\t\t'controller': 'equipmentDialogController',\r\n\t\t\t\t\t\t\t'action':'create',\r\n\t\t\t\t\t\t\t'message': 'Equipment created',\r\n\t\t\t\t\t\t\t'equipment_type_id': equipment_type.id,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\titem.action = function(current){\r\n\t\t\t\t\t\t\tsetInit(current);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$scope.subheader.navs.push(item);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsetInit($scope.subheader.navs[0]);\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t\t$scope.init();\r\n\t}]);","app\r\n\t.controller('birthdaysToolbarController', ['$scope', '$state', '$filter', function($scope, $state, $filter){\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Birthdays';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t$scope.toolbar.showInactive = true;\r\n\r\n\t\t$scope.toolbar.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'First Name',\r\n\t\t\t\t'type': 'first_name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Middle Name',\r\n\t\t\t\t'type': 'middle_name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Last Name',\r\n\t\t\t\t'type': 'last_name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'LOB',\r\n\t\t\t\t'type': 'lob',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Birthdate',\r\n\t\t\t\t'type': 'birthdate',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t'type': 'created_at',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.toolbar.others = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Upload',\r\n\t\t\t\t'action': function(){\r\n\t\t\t\t\t$state.go('main.upload');\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('equipmentToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Equipment';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t$scope.toolbar.showInactive = true;\r\n\r\n\t\t$scope.toolbar.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Brand',\r\n\t\t\t\t'type': 'brand',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Model',\r\n\t\t\t\t'type': 'model',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Asset Tag',\r\n\t\t\t\t'type': 'asset_tag',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t'type': 'created_at',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('formsToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Forms';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t$scope.toolbar.showInactive = true;\r\n\r\n\t\t$scope.toolbar.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Name',\r\n\t\t\t\t'type': 'name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Link',\r\n\t\t\t\t'type': 'form',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t'type': 'created_at',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('groupsToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Groups';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t$scope.toolbar.showInactive = true;\r\n\r\n\t\t$scope.toolbar.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Name',\r\n\t\t\t\t'type': 'name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t'type': 'created_at',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('linksToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Links';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t$scope.toolbar.showInactive = true;\r\n\r\n\t\t$scope.toolbar.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Name',\r\n\t\t\t\t'type': 'name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Link',\r\n\t\t\t\t'type': 'link',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t'type': 'created_at',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('locationsToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Rooms';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t$scope.toolbar.showInactive = true;\r\n\r\n\t\t$scope.toolbar.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Name',\r\n\t\t\t\t'type': 'name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t'type': 'created_at',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('uploadToolbarController', ['$scope', '$state', '$filter', function($scope, $state, $filter){\r\n\t\t$scope.toolbar.parentState = 'Upload';\r\n\t\t$scope.toolbar.childState = 'Birthdays';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);","app\r\n\t.controller('usersToolbarController', ['$scope', '$filter', function($scope, $filter){\r\n\t\t$scope.toolbar.parentState = 'Settings';\r\n\t\t$scope.toolbar.childState = 'Users';\r\n\r\n\t\t$scope.$on('close', function(){\r\n\t\t\t$scope.hideSearchBar();\r\n\t\t});\r\n\r\n\t\t$scope.toolbar.getItems = function(query){\r\n\t\t\tvar results = query ? $filter('filter')($scope.toolbar.items, query) : $scope.toolbar.items;\r\n\t\t\treturn results;\r\n\t\t}\r\n\r\n\t\t$scope.toolbar.searchAll = true;\r\n\t\t/**\r\n\t\t * Reveals the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.showSearchBar = function(){\r\n\t\t\t$scope.model.busy = true;\r\n\t\t\t$scope.searchBar = true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hides the search bar.\r\n\t\t *\r\n\t\t*/\r\n\t\t$scope.hideSearchBar = function(){\r\n\t\t\t$scope.searchBar = false;\r\n\t\t\t$scope.toolbar.searchText = '';\r\n\t\t\t$scope.toolbar.searchItem = '';\r\n\t\t\t/* Cancels the paginate when the user sent a query */\r\n\t\t\tif($scope.searched){\r\n\t\t\t\t$scope.model.page = 1;\r\n\t\t\t\t$scope.model.no_matches = false;\r\n\t\t\t\t$scope.model.items = [];\r\n\t\t\t\t$scope.searched = false;\r\n\t\t\t\t$scope.$emit('refresh');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.searchUserInput = function(){\r\n\t\t\t$scope.$emit('search');\r\n\t\t\t$scope.searched = true;\r\n\t\t};\r\n\r\n\t\t$scope.toolbar.options = true;\r\n\t\t$scope.toolbar.showInactive = true;\r\n\r\n\t\t$scope.toolbar.sort = [\r\n\t\t\t{\r\n\t\t\t\t'label': 'Name',\r\n\t\t\t\t'type': 'name',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Email',\r\n\t\t\t\t'type': 'email',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'label': 'Recently added',\r\n\t\t\t\t'type': 'created_at',\r\n\t\t\t\t'sortReverse': false,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t$scope.toolbar.refresh = function(){\r\n\t\t\t$scope.$emit('refresh');\r\n\t\t}\r\n\t}]);"]}